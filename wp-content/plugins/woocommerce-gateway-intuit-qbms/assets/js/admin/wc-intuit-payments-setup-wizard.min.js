"use strict";"undefined"!=typeof intuit&&intuit.ipp.anywhere.setup({grantUrl:wc_intuit_payments.connect_url,datasources:{quickbooks:!1,payments:!0},paymentOptions:{intuitReferred:!0}}),jQuery(function(i){var n,e=i("#wc_gateway_"+wc_intuit_payments.gateway_id+"_client_id"),o=i("#wc_gateway_"+wc_intuit_payments.gateway_id+"_client_secret");e.length&&o.length&&(n=e.closest("form"),window.onQuickBooksConnectionFailed=function(t){n.find("h1, .wc-intuit-payments-setup-connection-settings, .wc-setup-actions").hide(),t?(t.endsWith(".")&&(t=t.substring(0,t.length-1)),n.find(".wc-intuit-payments-connection-error-with-message").show().find("span").text(t)):n.find(".wc-intuit-payments-connection-error").show(),n.find(".wc-intuit-payments-setup-connection-suggestions").show()},window.onQuickBooksSuccessfulConnection=function(){window.location.href=n.find(".button-next").attr("href")},n.on("keypress keyup change","#"+e.attr("id")+", #"+o.attr("id"),function(){var t=i(this),n=t.closest(".form-row"),e=t.val();""===e?(n.addClass("woocommerce-invalid"),i('label[for="'+t.attr("id")+'"].wc-intuit-payments-error-message-empty').show()):e.match(/^[a-zA-Z0-9]{10,}$/)?(n.removeClass("woocommerce-invalid"),i('label[for="'+t.attr("id")+'"].wc-intuit-payments-error-message').hide()):(n.addClass("woocommerce-invalid"),i('label[for="'+t.attr("id")+'"].wc-intuit-payments-error-message-invalid').show())}),n.on("click",".button-next",function(t){t.preventDefault(),e.add(o).trigger("change"),e.closest(".form-row").hasClass("woocommerce-invalid")||o.closest(".form-row").hasClass("woocommerce-invalid")?n.find(".woocommerce-invalid input").first().focus():(t={action:"wc_intuit_payments_update_connection_settings",nonce:wc_intuit_payments.update_connection_settings_nonce,gateway_id:wc_intuit_payments.gateway_id,client_id:e.val(),client_secret:o.val()},i.post(wc_intuit_payments.ajaxurl,t,function(t){t.success?intuit.ipp.anywhere.controller.onConnectToIntuitClicked(n.find(".button-next").get(0)):onQuickBooksConnectionFailed(t.data)}))}));var s=i("button.newsletter-signup"),a={customer:{email:s.data("user-email"),accepts_marketing:!0,contact_source:"onboarding-intuit",tags:["customer","gateway-intuit-payments"]}};s.on("click",function(t){t.preventDefault(),i(".wc-intuit-payments-newsletter-prompt .spinner").css("visibility","visible"),i.post("https://api.jilt.com/v2/shops/0f017a8a-d26a-4572-81fd-c9364ae30f90/customer_sessions",a,function(){}).always(function(){i(".wc-intuit-payments-newsletter-prompt div").html("<p>"+s.data("thank-you")+"</p>")})})});