!function(t){"use strict";t(function(){t("#freshdesk-tickets").on("click","#open-ticket",function(e){e.preventDefault(),t("#freshdesk-tickets").block({message:null,overlayCSS:{background:"#fff url("+woocommerce_admin_meta_boxes.plugin_url+"/assets/images/ajax-loader.gif) no-repeat center",opacity:.6}});var o=t("#freshdesk-tickets #order-tickets-fields"),c={action:"wc_freshdesk_process_tickets",order_id:woocommerce_admin_meta_boxes.post_id,security:woocommerce_freshdesk_shop_order_params.security};t(".ticket-field").each(function(){var e=t(this),r=e.attr("name").replace("-","_").replace("ticket_",""),s=e.val();c[r]=s}),t.ajax({type:"POST",url:woocommerce_freshdesk_shop_order_params.ajax_url,cache:!1,dataType:"json",data:c,success:function(e){t("#freshdesk-tickets").unblock();var r="",s="";null!==e&&1===e.status?(r='<a href="'+woocommerce_freshdesk_shop_order_params.ticket_url+e.id+'">'+woocommerce_freshdesk_shop_order_params.view_ticket+"</a>",o.empty().prepend('<div class="ticket-message updated inline"><p>'+woocommerce_freshdesk_shop_order_params.success+" "+r+"</p></div>")):(s=woocommerce_freshdesk_shop_order_params.error,null!==e&&null!==e.message&&""!==e.message&&(s=e.message),t(".ticket-error",o).remove(),o.prepend('<div class="ticket-error error inline"><p>'+s+"</p></div>"))},error:function(){t("#freshdesk-tickets").unblock(),t(".ticket-error",o).remove(),o.prepend('<div class="ticket-error error inline"><p>'+woocommerce_freshdesk_shop_order_params.error+"</p></div>")}})})})}(jQuery);
