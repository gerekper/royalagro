/*! woocommerce-free-gift-coupons 3.0.0 */

jQuery(document).ready(function(t){var c=function(t){(function(t){return t.is(".processing")||t.parents(".processing").length})(t)||t.addClass("processing").block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},a=function(t){t.removeClass("processing").unblock()};t.fn.wc_fgc_find_auto_variation_open=function(c){let a=t(".wc_fgc_cart").closest("tr.wc-fgc-new-row"),e=t(".wc-fgc-show-edit");if(t(c).find(e).length>0){if(1==e.length&&0==a.length){let c=e.attr("id");t(`#${c} .wc_fgc_updatenow`).trigger("click")}return!0}return!1},t.fn.wc_fgc_observer=new MutationObserver(function(c){for(let a of c)if("childList"===a.type)for(let c of a.addedNodes)if(1==t(this).wc_fgc_find_auto_variation_open(c))break});let e=document;t(this).wc_fgc_observer.observe(e,{attributes:!1,childList:!0,characterData:!1,subtree:!0});var r=wc_fgc_var_cart_params.ajax_url;t(document).on("click",".wc_fgc_updatenow",function(e){e.preventDefault();let i=t(this);i.fadeOut();let o=t(this).closest(".wc-fgc-cart-update").attr("id").split("_")[1],n=t("tr#wc-fgc-new-row_"+o);if(n.length>0)n.fadeIn("slow");else{c(t(".woocommerce-cart-form")),t("#wc-fgc-variation-container").hide();var _=t(this).data("product_id"),f=t(this).data("variation_id"),s=t(this).closest("td").parent(),d=t(s).find(".input-text").val();t(this).parent().parent();Math.floor(d)==d&&t.isNumeric(d)||(d=1);var l=t(this).closest("tr"),w=t(this).data("item_key");t.ajax({url:r,cache:!1,type:"POST",headers:{"cache-control":"no-cache"},data:{action:"wc_fgc_get_product_html",nonce:wc_fgc_var_cart_params.wc_fgc_nonce,product_id:_,variation_id:f,cart_item_key:w},success:function(c){0==t("#wc_fgc_"+w).length&&l.after('<tr class="wc-fgc-new-row" id="wc-fgc-new-row_'+w+'"><td colspan="6">'+c+"</td></tr>"),t(".woocommerce-product-gallery").each(function(){t(this).wc_product_gallery(wc_fgc_var_cart_params)}),$form=t("#wc_fgc_"+w).find(".variations_form"),$form&&$form.wc_variation_form(),t("#wc-fgc-new-row_"+w).data("title",t("#wc_fgc_"+w).data("title"));var a=t("#wc_fgc_"+w).find("div .woocommerce-variation-add-to-cart");t(a).find(".input-text").val(d),t(a).find(".input-text").attr("disabled",!0),t(a).find(".input-text").hide(),$form.find(".variations select").last().trigger("change"),t(a).find(".single_add_to_cart_button").html("Update"),t("#wc-fgc-variation-container").show(),t("body,html").animate({scrollTop:t("#wc_fgc_"+w).offset().top-100},1e3)},complete:function(c,e){"success"!==e&&(alert(wc_fgc_var_cart_params.server_error),i.fadeIn()),a(t(".woocommerce-cart-form"))}})}}),t(document).on("click",".reset_variations",function(){t(".wc-fgc-stock-error").html(""),t(".wc-fgc-stock-error").hide()}),t(document).on("click",".single_add_to_cart_button",function(e){if(e.preventDefault(),!t(this).is(".disabled")){c(t(".wc_fgc_cart")),$id=t(this).closest(".wc_fgc_cart").attr("id");var i=t("#"+$id).find('input[name="product_id"]').val(),o=t("#"+$id).find('input[name="quantity"]').val(),n=t("#"+$id+" #wc_fgc_prevproid").val(),_=t("#"+$id+" #wc_fgc_cart_item_key").val(),f=t("#"+$id).find('input[name="variation_id"]').val();if(Math.floor(o))var s={};variations_html=t("#"+$id).find("select[name^=attribute]"),variations_html.each(function(){var c=t(this).attr("name"),a=t(this).val();s[c]=a}),t.ajax({url:r,cache:!1,type:"POST",headers:{"cache-control":"no-cache"},data:{action:"wc_fgc_update_variation_in_cart",product_id:i,quantity:o,PrevProId:n,variation_id:f,variation:s,cart_item_key:_,nonce:wc_fgc_var_cart_params.wc_fgc_nonce},success:function(c,a,e){if("success"===a){t('.woocommerce-cart-form [name="update_cart"]').removeAttr("disabled").trigger("click")}else c&&(t(".wc-fgc-stock-error").html(c),t(".wc-fgc-stock-error").show()),t("form.variations_form").find("div .woocommerce-variation-add-to-cart .input-text").show()},complete:function(){a(t(".wc_fgc_cart"))}})}}),t(document).on("click",".wc-fgc-close-btn",function(){let c=t(this).closest(".wc-fgc-new-row"),a="wc-fgc-item_"+c.attr("id").split("_")[1];c.fadeOut("slow"),t(`#${a} .wc_fgc_updatenow`).fadeIn("slow")}),t(this).wc_fgc_find_auto_variation_open(e)});