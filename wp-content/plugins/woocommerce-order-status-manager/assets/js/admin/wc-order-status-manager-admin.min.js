"use strict";(function(){jQuery(function(c){var e,u,d,t,n,r,a,o;if(c(".tips, .help_tip, .woocommerce-help-tip").tipTip({attribute:"data-tip",fadeIn:50,fadeOut:50,delay:200}),"wc_order_status"!==pagenow&&"edit-wc_order_status"!==pagenow&&"wc_order_status_manager_setup"!==pagenow&&"plugins"!==pagenow||c.extend(!0,c.magnificPopup.defaults,{tClose:wc_order_status_manager.i18n.close}),"wc_order_status"!==pagenow&&"edit-wc_order_status"!==pagenow&&"wc_order_status_manager_setup"!==pagenow||(d=c("#reassign-order-status"),u=c("#reassign-order-status-popup"),d.magnificPopup({inline:!0,callbacks:{open:function(){return u.show()},close:function(){return u.hide()}}}),c("a.submitdelete").on("click",function(t){var o,e,s,i;if(t.preventDefault(),i=this,s="wc_order_status"===pagenow?(e=c("#post_ID").val(),c("#post_name").val()):(e=c(this).closest("tr").attr("id").substr(5),c(this).closest("tr").find("td.column-slug").text()),e)return o={action:"wc_order_status_manager_can_safely_delete_order_status",security:wc_order_status_manager.delete_order_status_nonce,status:e},c.post(wc_order_status_manager.ajax_url,o,function(e){var t,n,r,a;return e.success?window.location=c(i).attr("href"):(u.find(".order-status-link").attr("href",e.data.orders_link),u.find(".order-status-count").text(e.data.orders_count),u.find(".order-status-name").text(e.data.status_name),r=u.find(".singular"),t=u.find(".plural"),1===e.data.orders_count?(r.show(),t.hide()):(r.hide(),t.show()),n=u.find("select"),a="",n.html(" "),c.each(wc_order_status_manager.order_statuses,function(t,e){if(t!==s)return a+='<option value="'+t+'">'+e+"</option>"}),u.find("select").html(a),d.trigger("click"),u.removeClass("mfp-hide"),u.find("button").on("click",function(t){return c(this).hasClass("reassign")?(o={action:"wc_order_status_manager_bulk_reassign_order_status",security:wc_order_status_manager.bulk_reassign_order_status_nonce,old_status:e.data.status_name,new_status:u.find("select").val()},c.post(wc_order_status_manager.ajax_url,o,function(t){return window.location=c(i).attr("href")})):c(this).hasClass("delete")?window.location=c(i).attr("href"):void 0}))})})),"edit-wc_order_status"===pagenow&&((t=c("#the-list")).sortable({placeholder:"ui-state-highlight",stop:function(){var t,e=[];return c("#the-list > tr ").each(function(){return e.push(c(this).find("td.slug").text())}),t={action:"wc_order_status_manager_sort_order_statuses",security:wc_order_status_manager.sort_order_statuses_nonce,statuses:e},c.post(wc_order_status_manager.ajax_url,t,function(t){})}}),t.disableSelection(),c("#import-custom-statuses").on("click",function(t){var e;return t.preventDefault(),e={action:"wc_order_status_manager_import_custom_order_statuses",security:wc_order_status_manager.import_custom_order_statuses_nonce},c.post(wc_order_status_manager.ajax_url,e,function(t){return location.reload()})})),"wc_order_status"!==pagenow&&"wc_order_status_manager_setup"!==pagenow||(c("#_next_statuses").select2(),c("#_color").wpColorPicker({change:function(t,e){return c("._icon_field .selected-icon").css("color",e.color.toString())}}),c(document).mousedown(function(t){if(!c(t.target).parents(".wp-picker-holder")&&!c(t.target).parents("mark"))return c(".wp-picker-holder").each(function(){return c(this).fadeOut()})}),o=function(t,e){var n=e?"url("+e+")":"none";return c(t).siblings("select").val(""),c(t).siblings(".icons-selector").find(".current-icon").removeClass("current-icon"),c(t).siblings(".icons-selector").find(".selected-icon i").removeClass().css("background-image",n)},c("#_icon, #_action_icon").each(function(){var e,t;return c(this).fontIconPicker({allCategoryText:wc_order_status_manager.i18n.all_icon_packages,source:wc_order_status_manager.icon_options}),(e=c(this).siblings(".icons-selector")).find(".fip-box:has(.fip-icon-block)").attr("title",wc_order_status_manager.i18n.remove_icon),e.find(".selector").addClass("button button-small"),c(this).on("change",function(t){if(c(this).val())return e.find(".selected-icon i").css("background-image","")}),(t=c(this).data("icon-image"))&&o(this,t),c(this).siblings(".upload-icon, .remove-icon").detach().insertAfter(c(this).siblings(".icons-selector").find(".selector"))}),c(".icons-selector .selector-button").attr("title",wc_order_status_manager.i18n.select_icon),c(".icons-search-input").attr("placeholder",wc_order_status_manager.i18n.search_icons),c("._icon_field .selected-icon").css("color",c("#_color").val()),r={},c(".upload-icon").on("click",function(t){var n;return t.preventDefault(),n=c(this).attr("href"),r[n]||(r[n]=wp.media.frames["file_frame_"+n]=wp.media({title:wc_order_status_manager.i18n.choose_file,button:{text:c(this).data("uploader-button-text")},multiple:!1}),r[n].on("select",function(t){var e=r[n].state().get("selection").first().toJSON();return c(n).val(e.id),c(n).siblings(".icons-selector").find(".selected-icon i").css("background-image","").removeClass().addClass("fa fa-refresh fa-spin"),c.get(wc_order_status_manager.ajax_url,{attachment_id:e.id,action:"wc_order_status_manager_get_icon_image_url"},function(t){if(-1!==t.indexOf("http"))return o(n,t)})})),r[n].open()}),c(".remove-icon").on("click",function(t){return t.preventDefault(),o(c(this).attr("href")),c(c(this).attr("href")).val("")}),c("#post_name").on("keyup",function(t){var e=c(".wc-prefix-disallowed");if(c(this).val().startsWith("wc-")){if(c(this).css("color","#A00000"),0===e.length)return c(this).after('<span class="wc-prefix-disallowed description" style="color:#A00000;display:inline-flex;">'+wc_order_status_manager.i18n.wc_prefix_disallowed+"</p>")}else if(c(this).css("color","#32373C"),0<e.length)return e.remove()}).trigger("keyup")),"wc_order_email"===pagenow&&(c(".dispatch_conditions").on("click",".remove-condition",function(t){if(window.confirm(wc_order_status_manager.i18n.remove_this_condition)&&(c(t.target).parents("tr").remove(),!c(".dispatch_conditions tbody").children().length))return c(".dispatch_conditions tbody, .dispatch_conditions thead").hide()}),c(".dispatch_conditions").on("click",".add-condition",function(t){var e=c(".dispatch_conditions tr.condition").length,n='<option value="any">'+wc_order_status_manager.i18n.any+"</option>";return c.each(wc_order_status_manager.order_statuses,function(t,e){return n+='<option value="'+t+'">'+e+"</option>"}),c(".dispatch_conditions thead").show(),c(".dispatch_conditions tbody").show().append('<tr class="condition"><td><select name="_email_dispatch_condition['+e+'][from]">'+n+'</select></td><td><select name="_email_dispatch_condition['+e+'][to]">'+n+'</select></td><td><button type="button" class="button remove-condition">'+wc_order_status_manager.i18n.remove+"</button></td></tr>")}),c(".save_order_status_email").on("click",function(t){var e=!1;if(c(".dispatch_conditions tr.condition").each(function(){var t="";if(!e)return c("select").each(function(){return e="any"===c(this).val()&&"any"===t,t=c(this).val()})}),e&&!window.confirm(wc_order_status_manager.i18n.confirm_any_status))return t.preventDefault()})),e=c("#order-status-plugin-deactivation"),"plugins"===pagenow&&e.length)return u=c("#order-status-plugin-deactivation-popup"),e.magnificPopup({inline:!0,callbacks:{open:function(){return u.show()},close:function(){return u.hide()}}}),n=c('#deactivate-woocommerce-order-status-manager, #deactivate-woocommerce-com-woocommerce-order-status-manager, [data-slug="woocommerce-order-status-manager"] .deactivate a'),a=!1,n.on("click",function(t){if(!a)return t.preventDefault(),u.find(".cancel, .deactivate").on("click",function(t){return u.find(".mfp-close").trigger("click")}),u.find(".deactivate").on("click",function(t){return window.location.href=n.attr("href")}),u.find("#order-status-plugin-deactivation-popup-dont-show-me-again").on("change",function(t){var e;return a=c(this).prop("checked"),e={action:"wc_order_status_manager_set_deactivation_confirmation_state",security:wc_order_status_manager.set_deactivation_confirmation_state,disabled:a},c.post(wc_order_status_manager.ajax_url,e)}),e.trigger("click")})})}).call(void 0);