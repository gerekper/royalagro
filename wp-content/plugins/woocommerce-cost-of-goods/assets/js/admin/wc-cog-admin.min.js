"use strict";(function(){jQuery(function(c){var n=function(s){var o,t;return 0===c("p.applying-costs-result .progress").length&&c("p.applying-costs-result").append(' <span class="progress"></span>'),o='<span class="error"   style="color: #DC3232;">&#10005;</span> '+wc_cog_admin.i18n.apply_costs_error,t='<span class="success" style="color: #008000;">&#10004;</span> '+wc_cog_admin.i18n.apply_costs_success,s={action:"wc_cog_get_applying_costs_status",security:wc_cog_admin.get_applying_cost_of_goods_status_nonce,job_id:s},c.post(ajaxurl,s).done(function(s){if(s.success){if("completed"!==s.data.status)return c("p.applying-costs-result .progress").html(s.data.progress+" / "+s.data.total),setTimeout(n(s.data.id),1e5);c("p.applying-costs-result").html(t)}else c("p.applying-costs-result").html(o),console.log(s.data);return c("span.applying-costs-progress").removeClass("is-active"),c("#wc_cog_apply_costs_to_previous_orders").prop("disabled",!1)}).fail(function(){return c("p.applying-costs-result").html(o),c("span.applying-costs-progress").removeClass("is-active"),c("#wc_cog_apply_costs_to_previous_orders").prop("disabled",!1)})};return wc_cog_admin.existing_background_job_id&&n(wc_cog_admin.existing_background_job_id),c("button#wc_cog_apply_costs_to_previous_orders").on("click",function(s){var o,t,e,a=this;return s.preventDefault(),s="all-orders"===c("input[name=wc_cog_apply_costs_previous_orders]:checked").val()?wc_cog_admin.i18n.apply_costs_confirm_message_all:wc_cog_admin.i18n.apply_costs_confirm_message,!!confirm(s)&&(s=c(this).closest("fieldset"),o=s.find("span.applying-costs-progress"),t=s.find("> p"),c(this).prop("disabled",!0),o.addClass("is-active"),t.addClass("applying-costs-result").html(wc_cog_admin.i18n.apply_costs_in_progress+"<br/>"+wc_cog_admin.i18n.apply_costs_notice),e='<span class="error" style="color: #DC3232;">&#10005;</span> '+wc_cog_admin.i18n.apply_costs_error,s={action:"wc_cog_apply_costs_to_previous_orders",security:wc_cog_admin.apply_cost_of_goods_nonce,previous_orders:c("input[name=wc_cog_apply_costs_previous_orders]:checked").val()},c.post(ajaxurl,s).done(function(s){return s.success?null!=s.data.id?setTimeout(n(s.data.id),1e5):void 0:(t.html(e),o.removeClass("is-active"),c(a).prop("disabled",!1))}).fail(function(){return c(a).prop("disabled",!1),o.removeClass("is-active"),t.html(e)}))}),c("select#field_to_edit").on("variable_cost_of_good_ajax_data",function(){return{value:window.prompt(woocommerce_admin_meta_boxes_variations.i18n_enter_a_value)}}),c("#the-list").on("click",".editinline",function(s){var o=c(this).closest("tr").attr("id");return o=o.replace("post-",""),o=c("#wc_cog_inline_"+o).find(".cost").text(),c('input[name="_wc_cog_cost"]').val(o)}),c("#woocommerce-order-items").on("change","input.quantity",function(s){var o,t,e;return s.preventDefault(),e=c(this).closest("tr.item"),t=c(this).val(),o=c(this).attr("data-qty"),s=c("input.cog-total",e),e=c("input.cog-suggestion",e),s=accounting.unformat(s.attr("data-cog-total"),"."),s/=o,e.val(accounting.formatNumber(s*t,woocommerce_admin_meta_boxes.currency_format_num_decimals,"",woocommerce_admin_meta_boxes.currency_format_decimal_sep).toString())})})}).call(void 0);