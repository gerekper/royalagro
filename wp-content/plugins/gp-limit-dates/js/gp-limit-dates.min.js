!function(l){window.GPLimitDates={init:function(e,t,a){var i=l("#input_"+e+"_"+t);i.change(function(){if(!l(this).data("gpldIgnoreChange")){var e=l.datepicker._getInst(l(this)[0]);e&&(l(this).data("gpldIgnoreChange",!0),l.datepicker._get(e,"onSelect").apply(e.input[0],[l(this).datepicker("getDate"),e]),l(this).data("gpldIgnoreChange",!1))}GPLimitDates.validateDate(l(this),t,a)}),GPLimitDates.validateDate(i,t,a)},isDateInRange:function(e,t,a){return GPLimitDates.isValidDateObject(t)&&GPLimitDates.isValidDateObject(a)?t<=e&&e<=a:GPLimitDates.isValidDateObject(t)?t<=e:!GPLimitDates.isValidDateObject(a)||e<=a},strToTime:function(e,t){var a,i,n,r,D,l,u,s,o,d,c=!1;if(!e)return c;if((i=(e=e.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g," ").replace(/[\t\r\n]/g,"").toLowerCase()).match(/^(\d{1,4})([\-\.\/\:])(\d{1,2})([\-\.\/\:])(\d{1,4})(?:\s(\d{1,2}):(\d{2})?:?(\d{2})?)?(?:\s([A-Z]+)?)?$/))&&i[2]===i[4])if(1901<i[1])switch(i[2]){case"-":return 12<i[3]||31<i[5]?c:new Date(i[1],parseInt(i[3],10)-1,i[5],i[6]||0,i[7]||0,i[8]||0,i[9]||0)/1e3;case".":return c;case"/":return 12<i[3]||31<i[5]?c:new Date(i[1],parseInt(i[3],10)-1,i[5],i[6]||0,i[7]||0,i[8]||0,i[9]||0)/1e3}else if(1901<i[5])switch(i[2]){case"-":case".":return 12<i[3]||31<i[1]?c:new Date(i[5],parseInt(i[3],10)-1,i[1],i[6]||0,i[7]||0,i[8]||0,i[9]||0)/1e3;case"/":return 12<i[1]||31<i[3]?c:new Date(i[5],parseInt(i[1],10)-1,i[3],i[6]||0,i[7]||0,i[8]||0,i[9]||0)/1e3}else switch(i[2]){case"-":return 12<i[3]||31<i[5]||i[1]<70&&38<i[1]?c:(r=0<=i[1]&&i[1]<=38?+i[1]+2e3:i[1],new Date(r,parseInt(i[3],10)-1,i[5],i[6]||0,i[7]||0,i[8]||0,i[9]||0)/1e3);case".":return 70<=i[5]?12<i[3]||31<i[1]?c:new Date(i[5],parseInt(i[3],10)-1,i[1],i[6]||0,i[7]||0,i[8]||0,i[9]||0)/1e3:i[5]<60&&!i[6]?23<i[1]||59<i[3]?c:(n=new Date,new Date(n.getFullYear(),n.getMonth(),n.getDate(),i[1]||0,i[3]||0,i[5]||0,i[9]||0)/1e3):c;case"/":return 12<i[1]||31<i[3]||i[5]<70&&38<i[5]?c:(r=0<=i[5]&&i[5]<=38?+i[5]+2e3:i[5],new Date(r,parseInt(i[1],10)-1,i[3],i[6]||0,i[7]||0,i[8]||0,i[9]||0)/1e3);case":":return 23<i[1]||59<i[3]||59<i[5]?c:(n=new Date,new Date(n.getFullYear(),n.getMonth(),n.getDate(),i[1]||0,i[3]||0,i[5]||0)/1e3)}if("now"===e)return null===t||isNaN(t)?(new Date).getTime()/1e3|0:0|t;if(!isNaN(a=Date.parse(e)))return a/1e3|0;if((i=e.match(/^([0-9]{4}-[0-9]{2}-[0-9]{2})[ t]([0-9]{2}:[0-9]{2}:[0-9]{2}(\.[0-9]+)?)([\+-][0-9]{2}(:[0-9]{2})?|z)/))&&("z"==i[4]?i[4]="Z":i[4].match(/^([\+-][0-9]{2})$/)&&(i[4]=i[4]+":00"),!isNaN(a=Date.parse(i[1]+"T"+i[2]+i[4]))))return a/1e3|0;function p(e){var t,a,i,n,r=e.split(" "),s=r[0],o=r[1].substring(0,3),d=/\d+/.test(s),c=("last"===s?-1:1)*("ago"===r[2]?-1:1);if(d&&(c*=parseInt(s,10)),u.hasOwnProperty(o)&&!r[1].match(/^mon(day|\.)?$/i))return D["set"+u[o]](D["get"+u[o]]()+c);if("wee"===o)return D.setDate(D.getDate()+7*c);if("next"===s||"last"===s)t=s,a=c,void 0!==(n=l[o])&&(0==(i=n-D.getDay())?i=7*a:0<i&&"last"===t?i-=7:i<0&&"next"===t&&(i+=7),D.setDate(D.getDate()+i));else if(!d)return!1;return!0}if(D=t?new Date(1e3*t):new Date,l={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6},u={yea:"FullYear",mon:"Month",day:"Date",hou:"Hours",min:"Minutes",sec:"Seconds"},"([+-]?\\d+\\s"+(o="(years?|months?|weeks?|days?|hours?|minutes?|min|seconds?|sec|sunday|sun\\.?|monday|mon\\.?|tuesday|tue\\.?|wednesday|wed\\.?|thursday|thu\\.?|friday|fri\\.?|saturday|sat\\.?)")+"|(last|next)\\s"+o+")(\\sago)?",!(i=e.match(new RegExp("([+-]?\\d+\\s(years?|months?|weeks?|days?|hours?|minutes?|min|seconds?|sec|sunday|sun\\.?|monday|mon\\.?|tuesday|tue\\.?|wednesday|wed\\.?|thursday|thu\\.?|friday|fri\\.?|saturday|sat\\.?)|(last|next)\\s(years?|months?|weeks?|days?|hours?|minutes?|min|seconds?|sec|sunday|sun\\.?|monday|mon\\.?|tuesday|tue\\.?|wednesday|wed\\.?|thursday|thu\\.?|friday|fri\\.?|saturday|sat\\.?))(\\sago)?","gi"))))return c;for(d=0,s=i.length;d<s;d++)if(!p(i[d]))return c;return D.getTime()/1e3},getModifiedDate:function(e,t,a,i){var n=new Date(1e3*GPLimitDates.strToTime(e,t.getTime()/1e3));return gform.applyFilters("gpld_modified_date",n,e,t,a,i)},getDateValue:function(e,t,a,i,n){var r=null,s=GPLimitDates.isNumeric(e);if("{today}"==e)r=new Date;else if(s){var o=l("#input_"+i+"_"+e);r=o.val()?GPLimitDates.parseDate(o.val(),e,n):GPLimitDates.getDateValue(n[e][t],t,e,i,n)}else r=new Date(e);var d="minDate"==t?n[a].minDateMod:n[a].maxDateMod;return d&&(r=GPLimitDates.getModifiedDate(d,r,n,a)),"{today}"==e&&(r=GPLimitDates.convertDateToServerTime(r,GPLimitDatesData.serverTimezoneOffset)).setHours(0,0,0,0),r},setMinMaxDate:function(a,e,i,n){var t=n[e].setsMinDateFor,r=n[e].setsMaxDateFor;t&&l.each(t,function(e,t){GPLimitDates.setMinDate(a.datepicker("getDate"),t,i,n)}),r&&l.each(r,function(e,t){GPLimitDates.setMaxDate(a.datepicker("getDate"),t,i,n)})},setMinDate:function(e,t,a,i){if(e){var n=i[t].inlineDatepicker,r=l(n?"#datepicker_"+a+"_"+t:"#input_"+a+"_"+t),s=i[t].minDateMod,o=e;return s&&(o=GPLimitDates.getModifiedDate(s,o,i,t)),r.datepicker("option","minDate",o),r.datepicker("refresh"),n&&l(r.datepicker("option","altField")).change(),gform.doAction("gpld_after_set_min_date",r,o,e,t,a,i),o}},setMaxDate:function(e,t,a,i){if(e){var n=i[t].inlineDatepicker,r=l(n?"#datepicker_"+a+"_"+t:"#input_"+a+"_"+t),s=i[t].maxDateMod,o=e;return s&&(o=GPLimitDates.getModifiedDate(s,new Date(o),i,t)),r.datepicker("option","maxDate",o),r.datepicker("refresh"),n&&l(r.datepicker("option","altField")).change(),o}},isDateShown:function(e,t,a){if(!e)return[!0];var i=t[a].daysOfWeek,n=t[a].exceptions,r=l.datepicker.formatDate("mm/dd/yy",e),s=e.getDay(),o="object"!=typeof i||i.length<=0||-1!=i.indexOf(s),d=o&&!t[a].disableAll;if(-1!=n.indexOf(r))switch(d=GPLimitDates.isDateInRange(e,l(this).datepicker("option","minDate"),l(this).datepicker("option","maxDate"))&&o,t[a].exceptionMode){case"enable":d=!0;break;case"disable":d=!1;break;default:d=!d}return[d]},validateDate:function(e,t,a){var i=e.datepicker("getDate"),n=l.datepicker.formatDate(e.datepicker("option","dateFormat"),i),r=e.val(),s=e.parents(".ginput_container"),o=s.find("span.gpld-error-message");if(!i)return o.hide(),void e.removeClass("gpld-error");if(r!=n&&e.val(n),!i||GPLimitDates.isDateShown(i,a,t)[0]&&GPLimitDates.isDateInRange(i,e.datepicker("option","minDate"),e.datepicker("option","maxDate")))o.hide(),e.removeClass("gpld-error");else{if(o.length<=0){var d=window.gform.applyFilters("gpld_invalid_date_error",GPLimitDatesData.strings.invalidDate,t,e,i,a[t]);o=l('<span class="gpld-error-message" style="background: transparent url( \'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTc5MiIgaGVpZ2h0PSIxNzkyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogPGc+CiAgPHRpdGxlPkxheWVyIDE8L3RpdGxlPgogIDxwYXRoIGZpbGw9IiM3OTAwMDAiIGQ9Im0xNDkwLDEzMjJxMCw0MCAtMjgsNjhsLTEzNiwxMzZxLTI4LDI4IC02OCwyOHQtNjgsLTI4bC0yOTQsLTI5NGwtMjk0LDI5NHEtMjgsMjggLTY4LDI4dC02OCwtMjhsLTEzNiwtMTM2cS0yOCwtMjggLTI4LC02OHQyOCwtNjhsMjk0LC0yOTRsLTI5NCwtMjk0cS0yOCwtMjggLTI4LC02OHQyOCwtNjhsMTM2LC0xMzZxMjgsLTI4IDY4LC0yOHQ2OCwyOGwyOTQsMjk0bDI5NCwtMjk0cTI4LC0yOCA2OCwtMjh0NjgsMjhsMTM2LDEzNnEyOCwyOCAyOCw2OHQtMjgsNjhsLTI5NCwyOTRsMjk0LDI5NHEyOCwyOCAyOCw2OHoiIGlkPSJzdmdfMSIvPgogPC9nPgo8L3N2Zz4=\' ) no-repeat center left; background-size: 18px; padding-left: 19px; color: #790000; font-size: 12px;">'+d+"</span>"),s.append(o)}o.show(),e.addClass("gpld-error")}},convertDateToServerTime:function(e,t){var a=t,i=e,n=i.getTimezoneOffset(),r=new Date(i);r.setHours(r.getHours()+Math.floor(n/60));var s=new Date(r);return s.setHours(s.getHours()+Math.floor(a/60)),s},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},isValidDateObject:function(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())},parseDate:function(e,t,a){if(void 0===e)return e;try{var i=a[t].dateFormat.split("_"),n=i[0],r=i[1]?i[1]:"slash",s={slash:"/",dot:".",dash:"-"}[r],o=e.split(s),d=o[n.indexOf("m")],c=o[n.indexOf("d")],D=o[n.indexOf("y")];return e=new Date(D,d-1,c,0,0,0,0)}catch(e){}},formatDate:function(e,t,a){var i=a[t].dateFormat.split("_"),n={slash:"/",dot:".",dash:"-"}[i[1]?i[1]:"slash"],r=i[0].split("").join(n),s=e.getMonth()+1+"",o="00".substring(0,2-s.length)+s,d=e.getDate(),c=e.getFullYear();return r.replace("m",o).replace("d",d).replace("y",c)},setInlineDate:function(e,t,a){var i=new Date,n=e.val()?e.val():GPLimitDates.formatDate(i,t,a);e.val(n).change()},initDisabledDatepicker:function(e){gformInitSingleDatepicker(e),e.datepicker("option","disabled",!0).prop("disabled",!1)}},gform.addFilter("gform_datepicker_options_pre_init",function(r,s,o){if(void 0===s)return r;var d=window["GPLimitDatesData"+s];if(!d||!d[o])return r;r.onClose;var c=[],D=l("#ui-datepicker-div");return D.hide(),r.onSelect&&c.push(r.onSelect),l.each(d[o],function(e,i){if(!i||i.length<=0)return!0;switch(e){case"inlineDatepicker":var t=l("#input_{0}_{1}".format(s,o)),a=new Date,n=t.val()?t.val():GPLimitDates.formatDate(a,o,d);r.altField="#"+t.attr("id"),r.defaultDate=n,t.val(n).change(),l(document).on("gform_post_conditional_logic",function(){var e=l("#datepicker_{0}_{1}".format(s,o));e.datepicker("setDate",e.datepicker("getDate"))});break;case"minDate":r.minDate=GPLimitDates.getDateValue(i,e,o,s,d);break;case"maxDate":r.maxDate=GPLimitDates.getDateValue(i,e,o,s,d);break;case"setsMinDateFor":case"setsMaxDateFor":c.push(function(){"function"==typeof onSelect&&onSelect();var e=l(this),t=!0;l.isArray(i)?l.each(i,function(e){if(!d[i[e]].inlineDatepicker)return t=!1}):t=d[i].inlineDatepicker;var a=setInterval(function(){D.is(":visible")||(GPLimitDates.setMinMaxDate(e,o,s,d),clearInterval(a))},t?0:200)});break;case"daysOfWeek":case"exceptions":r.beforeShowDay=function(e){return GPLimitDates.isDateShown(e,d,o)}}}),r.onSelect=function(e,t){for(var a=0;a<c.length;a++)"function"==typeof c[a]&&c[a].call(this,e,t);var i=l(this).is("input")?l(this):l(l(this).datepicker("option","altField"));i.data("gpldIgnoreChange")||i.data("gpldIgnoreChange",!0).change().data("gpldIgnoreChange",!1)},GPLimitDates.init(s,o,d),r}),l(".gpro-disabled-datepicker").each(function(){GPLimitDates.initDisabledDatepicker(l(this))})}(jQuery);
//# sourceMappingURL=gp-limit-dates.js.map