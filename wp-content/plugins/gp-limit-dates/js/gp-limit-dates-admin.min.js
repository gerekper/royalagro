!function(d){var e=d("#field_date_input_type"),i=d("#gpld-minimum-date"),a=d("#gpld-maximum-date"),n=d("#gpld-min-date-modifier"),o=d("#gpld-min-date-exclude-before-today"),l=d("#gpld-min-date-exclude-before-today-modifier"),r=d("#gpld-max-date-modifier"),p=d("#gpld-min-date-input"),c=d("#gpld-max-date-input"),t=d(".gpld-date-input-reset"),s=d("#gpld-all-days"),f=d(".gpld-days-of-week-container input"),u=d(".gpld-exceptions-repeater"),m=d("#gpld-add-exception"),g=d("#gpld-add-exception-input"),h=d("#gpld-inline-datepicker"),v=function(e){return GPLD_ADMIN.key+e};function y(e){var t;"date"==GetInputType(e)&&"datepicker"==e.dateType?(d(".gp-limit-dates-field-settings").show(),d(".gpld-date-select-container").show(),d(".gpld-date-modifier-container").hide(),d(".gpld-date-input-container").hide(),d(".gpld-all-days-container").show(),d(".gpld-days-of-week-container").hide(),k(i,e),i.val(e[v("minDate")]),i.change(),p.val(e[v("minDateValue")]),n.val(e[v("minDateMod")]),o.attr("checked",!0===e[v("minDateExcludeBeforeToday")]).change(),l.val(e[v("minDateExcludeBeforeTodayMod")]),k(a,e),a.val(e[v("maxDate")]),a.change(),c.val(e[v("maxDateValue")]),r.val(e[v("maxDateMod")]),p.datepicker({dateFormat:"mm/dd/yy"}),c.datepicker({dateFormat:"mm/dd/yy"}),t="object"==typeof field[v("daysOfWeek")]?field[v("daysOfWeek")]:[0,1,2,3,4,5,6],f.each(function(){d(this).prop("checked",-1!=d.inArray(parseInt(d(this).val()),t))}),0<t.length&&t.length<7&&(T(!0),_()),function(){var e=function(){var e="object"==typeof field[v("exceptions")]?field[v("exceptions")]:[],t=[];if(e.length<=0)t.push({date:""});else for(var i=0;i<e.length;i++)t.push({date:e[i]});return t}();u.data("htmlTemplate")?u.html(u.data("htmlTemplate")):u.data("htmlTemplate",u.html());u.repeater({limit:0,items:e,minItemCount:0,addButtonMarkup:"",removeButtonMarkup:'<span class="remove"><i class="fa fa-times"></i></span>',callbacks:{save:function(e,t){for(var i=[],a=0;a<t.length;a++)i.push(t[a].date);SetFieldProperty(v("exceptions"),i)}}}),1!=e.length||e[0].date||u.removeItem(0)}(),h.prop("checked",1==e[v("inlineDatepicker")])):d(".gp-limit-dates-field-settings").hide()}function k(e,a){d.each(GPLD_ADMIN.dateSelectOptions,function(e,t){if("_datefields_"==t.value){t.options=[];for(var i=0;i<form.fields.length;i++)a.id!=form.fields[i].id&&"date"==GetInputType(form.fields[i])&&"datepicker"==form.fields[i].dateType&&t.options.push({label:GetLabel(form.fields[i]),value:form.fields[i].id})}}),e.html(function i(e){var a="";d.each(e,function(e,t){void 0!==t.options?a+='<optgroup label="'+t.label+'">'+i(t.options)+"</optgroup>":a+='<option value="'+t.value+'">'+t.label+"</option>"});return a}(GPLD_ADMIN.dateSelectOptions))}function b(e){var t,i,a,n,d=e.val(),o="_custom_"==d,l="gpld-minimum-date"===e.attr("id");d?o?(n=(a=e).parents(".gp-group").find(".gpld-date-input-container"),a.parent().hide(),n.show(),w(e),l&&((i=jQuery("#gpld-min-date-exclude-before-today-container").parents(".gp-row")).is(":visible")||i.show())):((t=e.parents(".gp-row").find(".gpld-date-modifier-container")).is(":visible")||t.show(),l&&x()):(w(e),l&&(x(),D()))}function w(e){e.parents(".gp-row").find(".gpld-date-modifier-container").hide().find("input").val("").change().keyup()}function x(){jQuery("#gpld-min-date-exclude-before-today-container").parents(".gp-row").hide().find("input").attr("checked",!1)}function D(){jQuery("#gpld-min-date-exclude-before-today-modifier-container").hide().find("input").val("").change().keyup()}function _(){var e=d(".gpld-days-of-week-container"),t=I().length;0<t?e.addClass("has-selection").removeClass("no-selection"):e.addClass("no-selection").removeClass("has-selection"),7<=t&&T(),SetFieldProperty(v("daysOfWeek"),I())}function I(){var i=[];return d.each(f.filter(":checked"),function(e,t){i.push(parseInt(t.value))}),i}function T(e){e=void 0!==e&&e;var t=d(".gpld-all-days-container"),i=d(".gpld-days-of-week-container"),a=t.is(":visible")||e?t:i,n=t.is(":visible")||e?i:t;a.hide(),n.show()}e.change(function(){y(GetSelectedField()),gperk.togglePerksTab()}),i.change(function(){b(d(this))}),o.change(function(){var e;d(this).is(":checked")?(e=jQuery("#gpld-min-date-exclude-before-today-modifier-container")).is(":visible")||e.show():D()}),a.change(function(){b(d(this))}),t.click(function(){var e,t,i;e=d(this),t=e.parents(".gpld-date-input-container"),i=t.parents(".gp-row").find(".gpld-date-select-container"),t.hide(),t.find("input").val("").change(),i.find("select").val("").change(),i.show()}),s.click(function(){f.prop("checked",!1),SetFieldProperty(v("daysOfWeek"),I()),_(),T()}),f.change(function(){_()}),m.click(function(){g.datepicker({dateFormat:"mm/dd/yy",onSelect:function(e){u.addNewItem({date:e})}}).datepicker("show")}),d(document).bind("gform_load_field_settings",function(e,t,i){y(t)})}(jQuery);
//# sourceMappingURL=gp-limit-dates-admin.js.map