!function(s){var c,l,v,h,m,f,p,g,a,i,e,u,b,w,y,x,k,T,E,C,H,j,q,M,P,S,I;function O(){s.ajax({url:x,cache:!1}).done(function(t){y.html('<div class="vbox-inline">'+t+"</div>"),n(!0)}).fail(function(){y.html('<div class="vbox-inline"><p>Error retrieving contents, please retry</div>'),n(!0)})}function z(){y.html('<iframe class="venoframe" src="'+x+'"></iframe>'),n()}function A(){var t=x.split("/"),t=t[t.length-1];y.html('<iframe class="venoframe" src="//player.vimeo.com/video/'+t+'"></iframe>'),n()}function D(){var t=x.split("/"),t=t[t.length-1];y.html('<iframe class="venoframe" allowfullscreen src="//www.youtube.com/embed/'+t+'"></iframe>'),n()}function L(){y.html('<div class="vbox-inline">'+s(x).html()+"</div>"),n()}function Q(){s(".vbox-content").find("img").one("load",function(){n()}).each(function(){this.complete&&s(this).load()})}function n(t){1!=(t=t||!1)&&s(window).scrollTop(0),P.html(H),y.find(">:first-child").addClass("figlio"),s(".figlio").css("width",m).css("height",g).css("padding",f).css("background",p),i=y.outerHeight(),e=s(window).height(),i+80<e?(a=(e-i)/2,y.css("margin-top",a),y.css("margin-bottom",a)):(y.css("margin-top","40px"),y.css("margin-bottom","40px")),y.animate({opacity:"1"},"slow","swing"),h.addClass("open")}s.fn.extend({venobox:function(t){var r=s.extend({framewidth:"",frameheight:"",border:"0",bgcolor:"#fff",titleattr:"title",numeratio:!1,infinigall:!1,overlayclose:!0},t);return this.each(function(){var d=s(this);if(d.data("venobox"))return!0;d.addClass("vbox-item"),d.data("framewidth",r.framewidth),d.data("frameheight",r.frameheight),d.data("border",r.border),d.data("bgcolor",r.bgcolor),d.data("numeratio",r.numeratio),d.data("infinigall",r.infinigall),d.data("overlayclose",r.overlayclose),d.data("venobox",!0),c=!!navigator.userAgent.match(/(iPad|iPhone|iPod)/g),l=!(!document.all||window.atob),d.click(function(t){function a(){T=d.data("gall"),u=d.data("numeratio"),w=d.data("infinigall"),0<(T=s('.vbox-item[data-gall="'+T+'"]')).length&&!0===u?(S.html(T.index(d)+1+" / "+T.length),S.fadeIn()):S.fadeOut(),E=T.eq(T.index(d)+1),C=T.eq(T.index(d)-1),d.attr(r.titleattr)?(H=d.attr(r.titleattr),P.fadeIn()):(H="",P.fadeOut()),0<T.length&&!0===w?(q=j=!0,E.length<1&&(E=T.eq(0)),T.index(d)<1&&(C=T.eq(T.index(T.length)))):(j=0<E.length?(s(".vbox-next").css("display","block"),!0):(s(".vbox-next").css("display","none"),!1),q=0<T.index(d)?(s(".vbox-prev").css("display","block"),!0):(s(".vbox-prev").css("display","none"),!1))}t.stopPropagation(),t.preventDefault(),d=s(this),v=d.data("overlay"),m=d.data("framewidth"),g=d.data("frameheight"),f=d.data("border"),p=d.data("bgcolor"),M=q=j=!1,x=d.attr("href"),k=-(k=s(window).scrollTop()),I=d.data("css")||"",s("body").wrapInner('<div class="vwrap"></div>'),b=s(".vwrap"),I='<div class="vbox-overlay '+I+'" style="background:'+v+'"><div class="vbox-preloader">Loading...</div><div class="vbox-container"><div class="vbox-content"></div></div><div class="vbox-title"></div><div class="vbox-num">0/0</div><div class="vbox-close">X</div><div class="vbox-next">next</div><div class="vbox-prev">prev</div></div>',s("body").append(I),h=s(".vbox-overlay"),s(".vbox-container"),y=s(".vbox-content"),S=s(".vbox-num"),P=s(".vbox-title"),y.html(""),y.css("opacity","0"),a(),h.css("min-height",s(window).outerHeight()),l?h.animate({opacity:1},250,function(){h.addClass("open"),h.css({"min-height":s(window).outerHeight(),height:"auto"}),"iframe"==d.data("type")?z():"inline"==d.data("type")?L():"ajax"==d.data("type")?O():"vimeo"==d.data("type")?A():"youtube"==d.data("type")?D():(y.html('<img src="'+x+'">'),Q())}):(h.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(t){t.target==t.currentTarget&&(h.css({"min-height":s(window).outerHeight(),height:"auto"}),"iframe"==d.data("type")?z():"inline"==d.data("type")?L():"ajax"==d.data("type")?O():"vimeo"==d.data("type")?A():"youtube"==d.data("type")?D():(y.html('<img src="'+x+'">'),Q()))}),h.css("opacity","1")),c?b.css({position:"fixed",top:k,opacity:"0"}).data("top",k):(b.css({position:"fixed",top:k}).data("top",k),s(window).scrollTop(0));var i=function(){M||(M=!0,v=C.data("overlay"),m=C.data("framewidth"),g=C.data("frameheight"),f=C.data("border"),p=C.data("bgcolor"),x=C.attr("href"),H=C.attr(r.titleattr)?C.attr(r.titleattr):"",v===undefined&&(v=""),h.css("min-height",s(window).outerHeight()),y.animate({opacity:0},500,function(){h.css("min-height",s(window).outerHeight()).css("background",v),"iframe"==C.data("type")?z():"inline"==C.data("type")?L():"ajax"==C.data("type")?O():"youtube"==C.data("type")?D():"vimeo"==C.data("type")?A():(y.html('<img src="'+x+'">'),Q()),d=C,a(),M=!1}))},e=function(){M||(M=!0,v=E.data("overlay"),m=E.data("framewidth"),g=E.data("frameheight"),f=E.data("border"),p=E.data("bgcolor"),x=E.attr("href"),H=E.attr(r.titleattr)?E.attr(r.titleattr):"",v===undefined&&(v=""),h.css("min-height",s(window).outerHeight()),y.animate({opacity:0},500,function(){h.css("min-height",s(window).outerHeight()).css("background",v),"iframe"==E.data("type")?z():"inline"==E.data("type")?L():"ajax"==E.data("type")?O():"youtube"==E.data("type")?D():"vimeo"==E.data("type")?A():(y.html('<img src="'+x+'">'),Q()),d=E,a(),M=!1}))};function n(t){27===t.keyCode&&o()}function o(){s("body").unbind("keydown",n),l?h.animate({opacity:0},500,function(){h.remove(),s(".vwrap").children().unwrap(),s(window).scrollTop(-k),M=!1,d.focus()}):(h.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),h.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(t){t.target==t.currentTarget&&(h.remove(),c?(s(".vwrap").bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){s(".vwrap").children().unwrap(),s(window).scrollTop(-k)}),s(".vwrap").css("opacity","1")):(s(".vwrap").children().unwrap(),s(window).scrollTop(-k)),M=!1,d.focus())}),h.css("opacity","0"),h.removeClass("open"),h.addClass("close"))}s("body").keydown(function(t){37==t.keyCode&&1==q&&i(),39==t.keyCode&&1==j&&e()}),s(".vbox-prev").click(function(){i()}),s(".vbox-next").click(function(){e()});t=".vbox-close, .vbox-overlay";return d.data("overlayclose")||(t=".vbox-close"),s(t).click(function(t){s(t.target).is(".figlio")||s(t.target).is(".vbox-next")||s(t.target).is(".vbox-prev")||s(t.target).is(".figlio *")||o()}),s("body").keydown(n),!1})})}}),s(window).resize(function(){s(".vbox-content").length&&(i=y.height(),e=s(window).height(),i+80<e?(a=(e-i)/2,y.css("margin-top",a),y.css("margin-bottom",a)):(y.css("margin-top","40px"),y.css("margin-bottom","40px")))})}(jQuery);