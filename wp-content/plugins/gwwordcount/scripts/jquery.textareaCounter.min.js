!function(p){p.fn.textareaCounter=function(o){var u=this,d=0;return o=p.extend({showCount:!0,limit:100,min:0,truncate:!0},o),u.updateWordCount=function(t){if(o.useRichTextEditor){var e=tinymce.get(t.attr("id")),n=e?e.getContent({format:"text"}):"";u.getPlainTextInput(gformGetFieldId(t)).val(n)}else n=p.trim(t.val());var i=n.match(/\S+/g),a=gform.applyFilters("gpwc_word_count",null==i?0:i.length,n,t),r=a,l="";o.min&&o.limit&&0==a?(l=u.prepareLabel([o.minDefaultLabelSingular,o.minDefaultLabel],o.limit,o.min,a),l+=", "+u.prepareLabel([o.defaultLabelSingular,o.defaultLabel],o.limit,o.min,a)):o.min&&(!o.limit||a<o.min)?l=0==a?[o.minDefaultLabelSingular,o.minDefaultLabel]:a<o.min?[o.minCounterLabelSingular,o.minCounterLabel]:o.minReachedLabel:0==a?l=[o.defaultLabelSingular,o.defaultLabel]:a>=o.limit?o.truncate&&!o.useRichTextEditor?(a=o.limit,l=o.limitReachedLabel,t.val(u.truncate(n))):l=a>o.limit?o.limitExceededLabel:o.limitReachedLabel:l=[o.counterLabelSingular,o.counterLabel],u.getCounterLabel(t).html(u.prepareLabel(l,o.limit,o.min,a)),d!=a&&p(document).trigger("textareaCounterUpdate",[a,t,r]),d=a},u.prepareLabel=function(t,e,n,i){var a;return e=parseInt(e),n=parseInt(n),i=parseInt(i),a=n&&i<n?n-i:e-i,"string"!=typeof t&&(t=1<(t[0].match("{min}")?n:t[0].match("{max}|{limit}")?e:t[0].match("{remaining}")?a:i)?t[1]:t[0]),t.replace("{limit}",e).replace("{max}",e).replace("{min}",n).replace("{remaining}",a).replace("{count}",i)},u.truncate=function(t){for(var e=(t=p.trim(t)).match(/\S+/g),n=t.split(/\S+/g),i=e.slice(0,o.limit),a="",r=0;r<i.length;r++)a+=i[r]+n[r+1];return a},u.getPlainTextInput=function(t){if(void 0===u.plainTextInputs&&(u.plainTextInputs={}),void 0===u.plainTextInputs[t]){var e=jQuery('<textarea id="gpwc_plain_text_'+o.formId+"_"+t+'" name="gpwc_plain_text_'+t+'" style="display:none;"></textarea>');e.appendTo(p("#field_"+o.formId+"_"+t)),u.plainTextInputs[t]=e}return u.plainTextInputs[t]},u.bindEvents=function(e){if(window.tinymce&&o.useRichTextEditor)var n=setInterval(function(){if(0!=tinymce.editors.length){clearInterval(n);for(var t=0;t<tinymce.editors.length;t++)if(tinymce.editors[t].id==e.attr("id")){tinymce.editors[t].on("keyup change",function(){u.updateWordCount(e)});break}u.updateWordCount(e)}},250);else e.on("input propertychange",function(){u.updateWordCount(e)});p(document).bind("gform_post_conditional_logic",function(){u.updateWordCount(e)})},u.getCounterLabel=function(t){var e=t.attr("id")+"-word-count",n=p("#"+e);if(o.showCount&&n.length<=0){var i="font-size: 11px; clear: both; margin-top: 3px; display: block;";p(".gform_fields").is(".left_label, .right_label")&&(i+="margin-left: 29%;"),o.useRichTextEditor&&(i+="padding:3px 10px;border-top:1px dotted #ddd;"),n=p('<span style="'+i+'" id="'+e+'" class="gp-word-count-label"></span>'),t.after(n)}return n},u.each(function(){u.bindEvents(p(this))})}}(jQuery);
//# sourceMappingURL=jquery.textareaCounter.js.map