"use strict";(function(){jQuery(function(o){var n=o(".wc-address-validation-field"),t=n.find("select"),d=t.parent("p"),s=o(".wc-address-validation-billing-field"),a=o(".wc-address-validation-shipping-field"),l=o('p[id$="_field"], p.create-account').not("#billing_country_field, #shipping_country_field, #billing_first_name_field, #shipping_first_name_field, #billing_last_name_field, #shipping_last_name_field, #billing_company_field, #shipping_company_field"),c=o('p[id^="billing_"][id$="_field"], p.create-account').not("#billing_country_field, #billing_first_name_field, #billing_last_name_field, #billing_company_field"),_=o('p[id^="shipping_"][id$="_field"]').not("#shipping_country_field, #shipping_first_name_field, #shipping_last_name_field, #shipping_company_field"),i=o('select[id$="country"], input[id$="country"]'),r=wc_address_validation_postcode_lookup.countries;return setTimeout(function(){return o("#billing_country_field").after(s),o("#shipping_country_field").after(a)},1),i.on("change",function(i){var e=o(this);if(-1!==o.inArray(o("#billing_country").val(),r)?(s.not(".wc-address-validation-results").show(),setTimeout(function(){return o("#billing_country_field").after(s)},1)):s.hide(),-1!==r.indexOf(o("#shipping_country").val())?(a.not(".wc-address-validation-results").show(),setTimeout(function(){return o("#shipping_country_field").after(a)},1)):a.hide(),wc_address_validation_postcode_lookup.force_postcode_lookup)return e.is("#billing_country")?c.delay().queue(function(){return-1!==r.indexOf(o("#billing_country").val())&&""===wc_address_validation_postcode_lookup.billing_postcode?o(this).hide():0===o(this).find('input[type="hidden"].hidden').length&&o(this).show(),o(this).dequeue()}):e.is("#shipping_country")?_.delay().queue(function(){return-1!==r.indexOf(o("#shipping_country").val())&&""===wc_address_validation_postcode_lookup.shipping_postcode?o(this).hide():0===o(this).find('input[type="hidden"].hidden').length&&o(this).show(),o(this).dequeue()}):void 0}),i.trigger("change"),o().select2&&n.find("select.wc-address-validation-enhanced-select").select2(),d.hide(),n.keypress(function(i){if(13===i.keyCode)return(n="billing"===o(this).find(".wc-address-validation-address-type").val()?s:a).find("a.button").trigger("click"),!1}),n.on("click","a.button",function(i){var e;return i.preventDefault(),i=o(this).siblings(".wc-address-validation-address-type").val(),l="billing"===i?c:_,t=(n="billing"===i?s:a).find("select"),!((d=t.parent("p")).is(".processing")||!n.find("input[type=text]").val())&&(d.addClass("processing").block({message:null,overlayCSS:{background:"#fff url( "+wc_address_validation_postcode_lookup.ajax_loader_url+" ) no-repeat center",opacity:.6}}),i={action:"wc_address_validation_lookup_postcode",security:wc_address_validation_postcode_lookup.nonce,postcode:n.find('input[name="wc_address_validation_postcode_lookup_postcode"]').val(),house_number:n.find('input[name="wc_address_validation_postcode_lookup_postcode_house_number"]').val()},"undefined"!=typeof wc_checkout_params?(e=wc_checkout_params.wc_ajax_url.toString().replace("%%endpoint%%","wc_address_validation_lookup_postcode"),delete i.action):e=wc_address_validation_postcode_lookup.ajax_url,o.ajax({type:"GET",url:e,data:i,dataType:"json",success:function(i){var e;if(i)return d.removeClass("processing").unblock(),t.find("option").remove(),d.show(),o(i).map(function(){return o("<option>").val(this.value).text(this.name).data("location",this).appendTo(t)}),e=function(){if(o().select2)return t.trigger("change"),t.select2("open")},!l.is(":visible")&&wc_address_validation_postcode_lookup.force_postcode_lookup&&"none"!==i.value?l.slideDown(null,e):e()}}))}),t.change(function(){var n=o(this).hasClass("billing")?"billing":"shipping",t=o(this).find(":selected").data("location"),i=["company","address_1","address_2","address_3","city","postcode","state"];if("none"!==t.value)return o.each(i,function(i,e){return o("input[name="+n+"_"+e+"]").val(t[e])}),o(document.body).trigger("update_checkout")})})}).call(void 0);