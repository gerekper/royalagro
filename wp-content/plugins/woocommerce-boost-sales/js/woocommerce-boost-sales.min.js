"use strict";function wbs_sort_object(e){return Object.keys(e).sort().reduce((s,t)=>(s[t]=e[t],s),{})}function submit_form_upsell(e){jQuery("#wbs-content-upsells").unbind().on("submit",".cart,.variations_form cart,.woocommerce-boost-sales-cart-form",function(s){s.preventDefault();var t=jQuery(this).serializeArray(),a=jQuery(this).data(),r=jQuery(this).find('button[type="submit"]'),o=(r.val()?r.val():a.product_id,jQuery(this).parent().parent().parent()),i=jQuery(this).parent().parent().parent().parent().parent(),n=i.find(".wbs-upsells-item-main").css("height");i.find(".wbs-upsells-item-main").css({"max-height":n}),r.attr("disabled","disabled").addClass("wbs-loading"),t.push({name:r.attr("name"),value:r.val()}),jQuery.ajax({url:jQuery(this).attr("action"),type:jQuery(this).attr("method"),data:t,success:function(s){o.find(".wbs-upsells-add-items").html('<span class="wbs-icon-added"></span> '+woocommerce_boost_sales_params.i18n_added_to_cart),i.addClass("wbs-upsells-item-added"),r.removeAttr("disabled").removeClass("wbs-loading"),jQuery("body").trigger("wc_fragment_refresh"),1!=e||jQuery(".xoo-wsc-modal").hasClass("xoo-wsc-active")||jQuery(".xoo-wsc-basket").click()},error:function(e){r.removeAttr("disabled")}})})}function submit_form_crosssell(e){jQuery("#wbs-content-cross-sells").unbind().on("submit",".woocommerce-boost-sales-cart-form",function(s){s.preventDefault();var t=jQuery(this).serializeArray(),a=jQuery(this).find('button[type="submit"]');a.parent().find('input[name="add-to-cart"]').val();a.attr("disabled","disabled"),t.push({name:a.attr("name"),value:a.val()}),jQuery(".wbs-content-crossell").addClass("wbs-adding-to-cart"),jQuery.ajax({url:jQuery(this).attr("action"),type:jQuery(this).attr("method"),data:t,success:function(s){a.removeAttr("disabled"),jQuery("body").trigger("wc_fragment_refresh"),jQuery(".wbs-content-crossell").addClass("wbs-added-to-cart"),1!=e||jQuery(".xoo-wsc-modal").hasClass("xoo-wsc-active")||jQuery(".xoo-wsc-basket").click(),setTimeout(function(){jQuery("#wbs-content-cross-sells").fadeOut(200),jQuery(".gift-button").fadeOut(200),jQuery("html").removeClass("wbs-html-overflow"),jQuery(".wbs-content-crossell").removeClass("wbs-adding-to-cart").removeClass("wbs-added-to-cart")},2e3)},error:function(e){a.removeAttr("disabled")}})}),jQuery("#wbs-content-cross-sells-product-single").css({"max-height":jQuery("#wbs-content-cross-sells-product-single").css("height")}).unbind().on("submit",".woocommerce-boost-sales-cart-form",function(s){s.preventDefault();var t=jQuery(this).serializeArray(),a=jQuery(this).find('button[type="submit"]');a.attr("disabled","disabled"),t.push({name:a.attr("name"),value:a.val()}),jQuery.ajax({url:jQuery(this).attr("action"),type:jQuery(this).attr("method"),data:t,success:function(s){a.removeAttr("disabled"),jQuery("body").trigger("wc_fragment_refresh"),jQuery(".wbs-content-cross-sells-product-single-container").addClass("wbs-added-to-cart"),1!=e||jQuery(".xoo-wsc-modal").hasClass("xoo-wsc-active")||jQuery(".xoo-wsc-basket").click()},error:function(e){a.removeAttr("disabled")}})})}var time_redirect,cross_sell_init;jQuery(document).ready(function(){if(jQuery(document).on("click","#wbs-content-discount-bar .wbs-overlay",function(){jQuery("#wbs-content-discount-bar").fadeOut(200)}),jQuery("body").on("click",".wbs-button-continue-stay",function(e){e.preventDefault(),jQuery(this).closest(".woocommerce-boost-sales").find(".wbs-close").click()}),"undefined"!=typeof woocommerce_boost_sales_params){var e=jQuery(".wbs-crosssells");if(e.length>0){var s=e.find("select");if(s.length>0&&(e.find(".wbs-single_add_to_cart_button").addClass("disabled wc-variation-selection-needed"),s.on("change",function(){for(var t=!0,a=0;a<s.length;a++)if(""==s.eq(a).val()){t=!1;break}t?e.find(".wbs-single_add_to_cart_button").removeClass("disabled wc-variation-selection-needed"):e.find(".wbs-single_add_to_cart_button").addClass("disabled wc-variation-selection-needed")})),"yes"===woocommerce_boost_sales_params.wc_hide_out_of_stock){var t=0;e.find(".wbs-variations_form").map(function(){var e=jQuery(this),s=e.closest(".wbs-product").find(".product-image").find("img"),a=s.attr("src"),r=e.find("select"),o=e.data("product_variations");if(o.length>0){var i={};if(r.map(function(){var e=jQuery(this).data("attribute_name"),s=jQuery(this).find('option[selected="selected"]').val();void 0!==s&&(i[e]=s);for(var t=0;t<o.length;t++){var a=o[t].attributes;jQuery(this).find('option[value="'+a[e]+'"]').prop("disabled",!1).removeClass("wbs-disabled-option")}}),!jQuery.isEmptyObject(i)){if(Object.keys(i).length===r.length)for(var n=wbs_sort_object(i),l=JSON.stringify(n),c=0;c<o.length;c++){var d=wbs_sort_object(o[c].attributes);if(JSON.stringify(d)===l){var u=o[c].image;u.hasOwnProperty("variation_image")&&u.thumb_src?s.attr("src",u.thumb_src):u.hasOwnProperty("url")&&u.url&&s.attr("src",u.url);break}}t+=r.length;var _=!0;for(var c in o)if(o.hasOwnProperty(c)&&JSON.stringify(o[c].attributes)===JSON.stringify(i)){_=!1;break}_&&(t-=r.length,r.map(function(){jQuery(this).val("")}))}}r.on("change",function(e){var t=jQuery(this).val(),i=jQuery(this).data("attribute_name");if(t){var n={};if(n[i]=t,r.not(jQuery(this)).map(function(){var e=jQuery(this).data("attribute_name"),s=jQuery(this).val();s&&(n[e]=s),jQuery(this).find("option").not('option[value=""]').prop("disabled",!0).addClass("wbs-disabled-option");for(var a=0;a<o.length;a++){var r=o[a].attributes;r[i]===t&&jQuery(this).find('option[value="'+r[e]+'"]').prop("disabled",!1).removeClass("wbs-disabled-option")}}),Object.keys(n).length===r.length)for(var l=wbs_sort_object(n),c=JSON.stringify(l),d=0;d<o.length;d++){var u=wbs_sort_object(o[d].attributes);if(JSON.stringify(u)===c){var _=o[d].image;_.hasOwnProperty("variation_image")&&_.thumb_src?s.attr("src",_.thumb_src):_.hasOwnProperty("url")&&_.url&&s.attr("src",_.url);break}}}else r.not(jQuery(this)).map(function(){var e=jQuery(this).data("attribute_name");jQuery(this).find("option").not('option[value=""]').prop("disabled",!0).addClass("wbs-disabled-option");for(var s=0;s<o.length;s++){var t=o[s].attributes;jQuery(this).find('option[value="'+t[e]+'"]').prop("disabled",!1).removeClass("wbs-disabled-option")}}),a&&s.attr("src",a)})}),t===s.length?e.find(".wbs-single_add_to_cart_button").removeClass("disabled wc-variation-selection-needed"):e.find(".wbs-single_add_to_cart_button").addClass("disabled wc-variation-selection-needed")}}var a=woocommerce_boost_sales_params.side_cart_auto_open;"yes"===woocommerce_boost_sales_params.ajax_add_to_cart_for_upsells&&submit_form_upsell(a),"yes"===woocommerce_boost_sales_params.ajax_add_to_cart_for_crosssells&&submit_form_crosssell(a)}woo_boost_sale.init(),woo_boost_sale.add_to_cart();var r=jQuery(".woocommerce-boost-sales").attr("data-time_rdt");r&&woo_boost_sale.counter(jQuery("#wbs_time_rdt"),r)});var woo_boost_sale={hide_crosssell_init:0,check_quantity:0,init:function(){if("undefined"==typeof wbs_add_to_cart_params||1!=parseInt(wbs_add_to_cart_params.ajax_button)?this.slider():1==wbs_add_to_cart_params.submit&&this.slider(),this.product_variation(),woo_boost_sale.hide(),this.hide_crosssell_init||this.initial_delay_icon(),jQuery(".gift-button").on("click",function(){woo_boost_sale.show_cross_sell(),jQuery(".vi-wbs-headline").removeClass("wbs-crosssell-message").addClass("wbs-crosssell-message")}),jQuery("#wbs-content-cross-sells-product-single .wbs-crosssells").length>0&&this.cross_slider(),jQuery(".woocommerce-boost-sales.wbs-content-up-sell .single_add_to_cart_button").unbind(),jQuery(".wbs-msg-congrats").length>0){var e=jQuery(".wbs-msg-congrats").attr("data-time");e&&woo_boost_sale.counter(jQuery(".auto-redirect span"),e)}if(jQuery("#wbs-gift-button-cat").on("click",function(){woo_boost_sale.hide_upsell(),woo_boost_sale.show_cross_sell_archive()}),jQuery(".vi-wbs-topbar").hasClass("wbs_top_bar")){var s=jQuery(window).width();jQuery(".vi-wbs-headline").css("top","50px"),s>=1366?jQuery(".wbs-archive-upsells .wbs-content").css("margin-top","45px"):jQuery(".wbs-archive-upsells .wbs-content").css("margin-top","85px")}jQuery(".vi-wbs-topbar").hasClass("wbs_bottom_bar")||((s=jQuery(window).width())<1366&&jQuery(".wbs-archive-upsells .wbs-content").css("margin-top","70px"),s<640&&jQuery(".wbs-archive-upsells .wbs-content").css("margin-top","0px"));jQuery(".wbs-message-success").length<1&&jQuery(".wbs-content-up-sell").css("height","100%"),jQuery(".wbs-content").hasClass("wbs-msg-congrats")&&setTimeout(function(){jQuery(".vi-wbs-headline").show()},0),jQuery(document).on("click",".vi-wbs_progress_close",function(){jQuery(".vi-wbs-topbar").fadeOut("slow")}),jQuery("#flexslider-cross-sell .vi-flex-prev").hasClass("vi-flex-disabled")||jQuery("#flexslider-cross-sell").hover(function(){jQuery("#flexslider-cross-sell .vi-flex-prev").css("opacity","1")},function(){jQuery("#flexslider-cross-sell .vi-flex-prev").css("opacity","0")}),jQuery("#flexslider-cross-sell .vi-flex-next").hasClass("vi-flex-disabled")||jQuery("#flexslider-cross-sell").hover(function(){jQuery("#flexslider-cross-sell .vi-flex-next").css("opacity","1")},function(){jQuery("#flexslider-cross-sell .vi-flex-next").css("opacity","0")}),jQuery(".wbs-wrapper").animate({opacity:1},200),woo_boost_sale.chosen_variable_upsell(),jQuery(".wbs-upsells > .wbs-").find("div.vi-wbs-chosen:first").removeClass("wbs-hidden-variable").addClass("wbs-show-variable")},product_variation:function(){jQuery("#wbs-content-upsells").find(".wbs-variations_form").each(function(){jQuery(this).wc_variation_form()}),jQuery("#wbs-content-upsells").on("check_variations",function(){jQuery(this).find(".variations_button").each(function(){jQuery(this).hasClass("woocommerce-variation-add-to-cart-disabled")?jQuery(this).find(".wbs-single_add_to_cart_button").addClass("disabled wc-variation-selection-needed"):jQuery(this).find(".wbs-single_add_to_cart_button").removeClass("disabled wc-variation-selection-needed")})}),jQuery("#wbs-content-upsells").on("show_variation",function(){jQuery(this).find(".variations_button").each(function(){jQuery(this).hasClass("woocommerce-variation-add-to-cart-disabled")?jQuery(this).find(".wbs-single_add_to_cart_button").addClass("disabled wc-variation-selection-needed"):jQuery(this).find(".wbs-single_add_to_cart_button").removeClass("disabled wc-variation-selection-needed")})}),jQuery(".wbs-single_add_to_cart_button").on("click",function(e){jQuery(this).is(".disabled")&&(e.preventDefault(),jQuery(this).hasClass("wc-variation-is-unavailable")?window.alert(wc_add_to_cart_variation_params.i18n_unavailable_text):jQuery(this).hasClass("wc-variation-selection-needed")&&window.alert(wc_add_to_cart_variation_params.i18n_make_a_selection_text))})},add_to_cart:function(){var e=0;jQuery(".wbs-content-up-sell").length>0&&(jQuery(document).ajaxSend(function(s,t,a){var r=a.url,o=a.data,i=0,n=0,l=0,c=0;if(""!=o&&null!=o&&!jQuery.isEmptyObject(o)){for(var d=o.split("&"),u=0;u<d.length;u++)d[u].search(/product_id/i)>=0&&(i=d[u]),d[u].search(/variation_id/i)>=0&&(l=d[u],c=1),d[u].search(/quantity/i)>=0&&(n=d[u]);if(c){if(!l)return;i=l.replace(/^\D+/g,""),i=parseInt(i)}else{if(!i)return;i=i.replace(/^\D+/g,""),i=parseInt(i)}if(r.search(/wc-ajax=add_to_cart/i)>=0||o.search(/action=wbs_ajax_add_to_cart/i)>=0)if("undefined"==typeof wbs_add_to_cart_params||1!=parseInt(wbs_add_to_cart_params.ajax_button))jQuery(".wbs-content-up-sell").html('<div class="wbs-overlay"><div class="wbs-loading"></div>').fadeIn(200);else{var _,b,w;if(n?(n=n.replace(/^\D+/g,""),n=parseInt(n)):n=1,"variable"==wbs_add_to_cart_params.product_type)for(var m in wbs_add_to_cart_params.products){i==(l=parseInt(wbs_add_to_cart_params.products[m].variation_id))&&(_=parseInt(wbs_add_to_cart_params.products[m].min_qty),b=parseInt(wbs_add_to_cart_params.products[m].max_qty),w=m)}else _=parseInt(wbs_add_to_cart_params.products[0].min_qty),b=parseInt(wbs_add_to_cart_params.products[0].max_qty),w=0;if(_&&_>0&&n<_&&(e=1),b&&b>0&&n>b&&(e=1),0==e){var p;wbs_add_to_cart_params.products[w].display_price;if(wbs_add_to_cart_params.products[w].attributes&&"undefined"!=wbs_add_to_cart_params.products[w].attributes){var y=Object.keys(wbs_add_to_cart_params.products[w].attributes).map(function(e){return jQuery('select[name="'+e+'"]').length>0?jQuery('select[name="'+e+'"]').val():wbs_add_to_cart_params.products[w].attributes[e]});p=(y=y.map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(", ")}p&&jQuery(".wbs-p-title").find(".wbs-p-url").html(jQuery(".wbs-p-title").find(".wbs-p-url").html()+" - "+p),jQuery(".wbs-p-quantity").find(".wbs-p-quantity-number").text(n);var f=jQuery(".wbs-price-total").find(".woocommerce-Price-amount").contents();if(wbs_add_to_cart_params.products[w].display_price>0){var h=n*wbs_add_to_cart_params.products[w].display_price;f.filter(function(e){return 3==this.nodeType}).each(function(){var e=encodeURI(this.textContent),s=this.textContent.trim();e=e.replace(s,h),this.textContent=decodeURI(e)})}jQuery(".vi-wbs-headline").css({visibility:"hidden",opacity:0}),jQuery(".woocommerce-boost-sales.wbs-content-up-sell").css({opacity:0}),jQuery(".woocommerce-boost-sales.wbs-content-up-sell").css({display:"flex",visibility:"visible"}).animate({opacity:1},300),0==wbs_add_to_cart_params.submit&&woo_boost_sale.slider(),jQuery(".wbs-archive-upsells").length>0&&jQuery("html").addClass("wbs-html-overflow"),clearTimeout(cross_sell_init),woo_boost_sale.hide_cross_sell()}}}}),jQuery(document).ajaxComplete(function(s,t,a){var r=a.url,o=a.data,i=0,n=0,l=0,c=0;if(""!=o&&null!=o&&!jQuery.isEmptyObject(o)){for(var d=o.split("&"),u=0;u<d.length;u++)d[u].search(/product_id/i)>=0?i=d[u]:d[u].search(/add-to-cart/i)>=0&&(i=d[u]),d[u].search(/variation_id/i)>=0&&(l=d[u],c=1),d[u].search(/quantity/i)>=0&&(n=d[u]);if(c){if(!l)return;i=l.replace(/^\D+/g,""),i=parseInt(i)}else{if(!i)return;i=i.replace(/^\D+/g,""),i=parseInt(i)}n?(n=n.replace(/^\D+/g,""),n=parseInt(n)):n=1,(r.search(/wc-ajax=add_to_cart/i)>=0||o.search(/action=wbs_ajax_add_to_cart/i)>=0||o.search(/action=wacv_ajax_add_to_cart/i)>=0||o.search(/action=woofc_update_cart/i)>=0)&&("undefined"==typeof wbs_add_to_cart_params||1!=parseInt(wbs_add_to_cart_params.ajax_button)?jQuery.ajax({type:"POST",data:"action=wbs_get_product&id="+i+"&quantity="+n,url:wboostsales_ajax_url,success:function(e){if(e.upsells_html){e.upsells_html.search(/wbs-overlay/i)<1&&(jQuery("html").removeClass("wbs-html-overflow"),jQuery(".vi-wbs-topbar").animate({opacity:1},500));jQuery(".woocommerce-boost-sales").attr("data-time_rdt");jQuery(".wbs-content-up-sell").html(e.upsells_html),jQuery(".wbs-content-up-sell").fadeIn(),woo_boost_sale.hide_crosssell_init=1,woo_boost_sale.init(),woo_boost_sale.slider(),setTimeout(function(){jQuery(".wbs-wrapper").animate({opacity:1},200)},200)}else woo_boost_sale.hide(),jQuery(".wbs-overlay").click();let s=e.discount_bar_html;s.hasOwnProperty("code")&&(200==s.code?jQuery("#wbs-content-discount-bar").html(s.html).css({position:"fixed"}).fadeIn(200):201==s.code&&jQuery("#wbs-content-discount-bar").html(s.html).css({position:""}).fadeIn(200))},error:function(e){jQuery("html").removeClass("wbs-html-overflow")}}):1==e&&window.location.reload())}}))},hide:function(){jQuery(".wbs-close, .woocommerce-boost-sales .wbs-overlay").unbind(),jQuery(".wbs-close, .woocommerce-boost-sales .wbs-overlay").on("click",function(){jQuery(".woocommerce-boost-sales").not(".woocommerce-boost-sales-active-discount").fadeOut(200),jQuery("html").removeClass("wbs-html-overflow"),clearTimeout(time_redirect)})},slider:function(){var e=jQuery(window).width(),s=jQuery("#flexslider-up-sell").attr("data-item-per-row"),t=jQuery("#flexslider-up-sell").attr("data-rtl");t=!!parseInt(t),null==s&&(s=4),e<768&&e>=600&&(s=2),e<600&&(s=1),jQuery("#flexslider-up-sell").length>0&&(jQuery("#flexslider-up-sell").vi_flexslider({namespace:"woocommerce-boost-sales-",selector:".wbs-vi-slides > .wbs-product",animation:"slide",animationLoop:!1,itemWidth:145,itemMargin:12,controlNav:!1,maxItems:s,reverse:!1,slideshow:!1,rtl:t}),(jQuery("#wbs-content-upsells").hasClass("wbs-form-submit")||"undefined"!=typeof wbs_add_to_cart_params&&1!=parseInt(wbs_add_to_cart_params.ajax_button))&&jQuery("html").addClass("wbs-html-overflow"))},cross_slider:function(){var e=jQuery(".wbs-cross-sells").attr("data-rtl"),s=jQuery(window).width(),t=3,a=jQuery("#flexslider-cross-sells").width();s<768&&s>=600&&(2,t=2),s<600&&(1,t=1),e=!!parseInt(e),jQuery("#wbs-content-cross-sells-product-single #flexslider-cross-sells").length>0?jQuery("#flexslider-cross-sells").vi_flexslider({namespace:"woocommerce-boost-sales-",selector:".wbs-cross-sells > .wbs-product",animation:"slide",animationLoop:!1,itemWidth:parseInt(a/t)-6,itemMargin:6,controlNav:!1,maxItems:t,slideshow:!1,rtl:e}):jQuery("#flexslider-cross-sells").length>0&&(jQuery("#flexslider-cross-sells").vi_flexslider({namespace:"woocommerce-boost-sales-",selector:".wbs-cross-sells > .wbs-product",animation:"slide",animationLoop:!1,itemWidth:145,itemMargin:24,controlNav:!1,maxItems:t,slideshow:!1,rtl:e}),jQuery("html").addClass("wbs-html-overflow"))},hide_upsell:function(){jQuery(".wbs-content").fadeOut(200)},hide_cross_sell:function(){jQuery("#wbs-content-cross-sells").fadeOut(200)},show_cross_sell:function(){jQuery("#wbs-content-cross-sells").fadeIn("slow"),jQuery("html").addClass("wbs-html-overflow"),this.cross_slider()},show_cross_sell_archive:function(){jQuery("#wbs-cross-sell-archive").fadeIn("slow")},counter:function(e,s){var t=jQuery(".vi-wbs-btn-redeem").attr("href");!function a(){e.html(s),0==s&&t&&(window.location.href=t),s--&&(time_redirect=setTimeout(a,1e3))}()},initial_delay_icon:function(){if(jQuery("#wbs-content-cross-sells").length>0){var e=jQuery("#wbs-content-cross-sells").attr("data-initial_delay"),s=jQuery("#wbs-content-cross-sells").attr("data-open");cross_sell_init=setTimeout(function(){jQuery(".gift-button").fadeIn("medium"),s>0&&woo_boost_sale.show_cross_sell()},1e3*e)}},chosen_variable_upsell:function(){jQuery("select.wbs-variable").on("change",function(){var e=jQuery(this).val();jQuery(this).closest("div.wbs-product").find(".vi-wbs-chosen").removeClass("wbs-show-variable").addClass("wbs-hidden-variable"),jQuery(this).closest("div.wbs-product").find(".wbs-variation-"+e).removeClass("wbs-hidden-variable").addClass("wbs-show-variable")})}};