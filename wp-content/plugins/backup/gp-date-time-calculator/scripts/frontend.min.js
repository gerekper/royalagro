!function(v){window.GWDTCalc=function(e){var p=this;for(prop in e)e.hasOwnProperty(prop)&&(p[prop]=e[prop]);p.rebind=function(e,t){t===p.formId&&v.each(p.elementsToBind,function(n,e){v.each(e,function(e,t){$inputs=v(),v.each(t.dateFields,function(e,t){$inputs=$inputs.add(v("#field_"+n+"_"+t.id).find("input, select"))}),p.bindEvents($inputs,t.calcField,t.calcObj)})})},p.init=function(){p.elementsToBind={},jQuery(document).on("gform_post_render",p.rebind),gform.addFilter("gform_calculation_formula",function(s,l,f,u){if(f!=p.formId)return s;var g=l.field_id,e=GFMergeTag.parseMergeTags(s,/{(weekdays|weekendDays):(?:{.*?:([0-9]+)}),(?:{.*?:([0-9]+)})}/);v.each(e,function(e,t){var n=t[0],a=t[1],i=p.getDateFieldValue(p.getDateField(g,t[2]),p.formId),o=p.getDateFieldValue(p.getDateField(g,t[3]),p.formId),r=0;if(0<i&&0<o)switch(a){case"weekdays":r=p.calcWeekDays(new Date(1e3*i),new Date(1e3*o));break;case"weekendDays":r=p.calcWeekendDays(new Date(1e3*i),new Date(1e3*o))}s=s.replace(n,"("+r+")")});var t=(window.GFMergeTag,GFMergeTag.parseMergeTags(s));if(0<t.length)var m=p.getCalcFieldData(g);v.each(t,function(e,t){var n=t[0],a=t[1],i=t[4],o=parseInt(a),r=p.getDateField(g,o);if(r){var d=v("#field_"+f+"_"+r.id).find("input, select"),c=p.getDateFieldValue(r,f,d);i&&(c=p.processModifier(c,i)),"age"!=i&&(c=p.convertToUnit(c,m.unit)),s=s.replace(n,"("+c+")"),f in p.elementsToBind||(p.elementsToBind[f]={}),p.bindEvents(d,l,u),p.elementsToBind[f][g]?p.elementsToBind[f][g].dateFields.push(r):p.elementsToBind[f][g]={calcField:l,calcObj:u,dateFields:[r]}}});return v.each(["today","now"],function(e,t){if(-1!==s.indexOf("{"+t+"}")){var n=0,a=p.getCalcFieldData(g);if(a){switch(t){case"today":n=p.getMomentToday({hour:0,minute:0,seconds:0}).format("X"),n=p.convertToUnit(n,a.unit);break;case"now":n=p.getMoment(void 0,!1).format("X"),n=p.convertToUnit(n,a.unit)}var i=new RegExp("{"+t+"}","g");s=s.replace(i,"("+n+")")}}}),s}),v(document).trigger("gform_post_conditional_logic")},p.getMoment=function(e,t,n){void 0===t&&(t=!0);var a=parseInt(GPDTC.GMT_OFFSET);return 0===a?moment.utc(e,n):moment(e,n).utcOffset(a,t)},p.onChangeFactory=function(e,t){return function(){t.bindCalcEvent(v(this).attr("id"),e,p.formId,0)}},p.bindEvents=function(e,t,n){e.off("change.gpdtc").on("change.gpdtc",p.onChangeFactory(t,n)),e.not("select").off("keyup.gpdtc").on("keyup.gpdtc",p.onChangeFactory(t,n))},p.getCalcFieldData=function(n){var a=!1;return v.each(p.dateFieldsData,function(e,t){if(e==n)return a=t,!1}),a},p.getDateField=function(e,n){var a=!1,t=p.getCalcFieldData(e);return!!t&&(v.each(t.fields,function(e,t){if(n==t.id)return a=t,!1}),a)},p.getDateFieldValue=function(e,t,n){var a=!window.gf_check_field_rule||"show"==gf_check_field_rule(t,e.id,!0,""),i=0;if((n=void 0===n?v("#field_"+t+"_"+e.id).find("input, select"):n).length<=0||!a)return i;switch(e.type){case"date":var o=e.dateFormat.split("_")[0];switch(e.dateType){case"datefield":case"datedropdown":var r=n.eq(o.indexOf("m")).val(),d=n.eq(o.indexOf("d")).val(),c=n.eq(o.indexOf("y")).val(),s=!(!r||!d||!c)&&p.getMoment(r+"/"+d+"/"+c,!1,"M/D/YYYY");break;case"datepicker":var l=o.toUpperCase().split("").join("/").replace("Y","YYYY");s=!!n.val()&&p.getMoment(n.val(),!0,l)}var f=!1===s?0:s.format("X");break;case"time":f=p.getMoment(void 0,!1).format("X");var u=parseInt(n.eq(0).val()),g=n.eq(1).val(),m=n.eq(2).val();!u||!g||("am"===m&&12===u&&(u=0),"pm"===m&&12===u&&(u=12),"pm"===m&&12!==u&&(u+=12),f=(s=p.getMomentToday({hour:u,minute:parseInt(g)})).toDate().getTime()/1e3)}return i=f},p.getMomentToday=function(e){var t=p.getMoment(void 0,!1);return p.getMoment(v.extend({},{year:t.year(),month:t.month(),day:t.date()},e))},p.processModifier=function(e,t){switch(t){case"age":0<Math.abs(e)&&(e=moment().diff(moment(new Date(1e3*e)),"years"))}return e},p.convertToUnit=function(e,t){return 0===parseInt(e)?0:p.getMoment(1e3*e).diff("1970-01-01",t.slug,!0)},p.calcWeekDays=function(e,t){return p.calcDays(e,t,"weekdays")},p.calcWeekendDays=function(e,t){return p.calcDays(e,t,"weekendDays")},p.calcDays=function(e,t,n){if(t<e)return 0;void 0===n&&(n="weekdays"),e.setHours(0,0,0,1),t.setHours(23,59,59,999);for(var a=0,i=0;e<t;)0===e.getDay()||6==e.getDay()?i++:a++,e.setDate(e.getDate()+1);var o="weekdays"==n?a:i;return Math.round(o)},p.init()}}(jQuery);
//# sourceMappingURL=frontend.js.map