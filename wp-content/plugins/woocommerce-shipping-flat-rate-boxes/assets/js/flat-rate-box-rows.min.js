!function(a,o,t,i){var n=t.template("flat-rate-box-row-template"),e=a("#flat_rate_boxes"),r=e.find("tbody.flat_rate_boxes"),c={init:function(){e.on("click","a.add-box",this.onAddRate).on("click","a.remove",this.onRemoveRate);var o=r.data("boxes");a(o).each(function(t){var e=r.find(".flat_rate_box").length;r.append(n({box:o[t],index:e}))}),r.sortable({items:"tr",cursor:"move",axis:"y",handle:"td",scrollSensitivity:40,helper:function(t,e){return e.children().each(function(){a(this).width(a(this).width())}),e.css("left","0"),e},start:function(t,e){e.item.css("background-color","#f6f6f6")},stop:function(t,e){e.item.removeAttr("style"),c.reindexRows()}})},onAddRate:function(t){t.preventDefault();var e=r,o=e.find(".flat_rate_box").length;e.append(n({box:{box_id:"",box_length:"",box_width:"",box_height:"",box_max_weight:"",box_cost:"",box_cost_per_weight_unit:"",box_cost_percent:""},index:o}))},onRemoveRate:function(t){if(t.preventDefault(),confirm(o.i18n.delete_rates)){var n=[];r.find("tr td.check-column input:checked").each(function(t,e){var o=a(e).closest("tr.flat_rate_box").find(".box_id").val();n.push(o),a(e).closest("tr.flat_rate_box").addClass("deleting")});var e={action:"woocommerce_flat_rate_box_delete",box_id:n,security:o.delete_box_nonce};a.post(i,e,function(t){a("tr.deleting").fadeOut("300",function(){a(this).remove()})})}},reindexRows:function(){var n=0;r.find("tr").each(function(t,e){a("input.text, input.checkbox, select.select",e).each(function(t,e){var o=a(e);o.attr("name",o.attr("name").replace(/\[([^[]*)\]/,"["+n+"]"))}),n++})}};c.init()}(jQuery,woocommerce_shipping_flat_rate_box_rows,wp,ajaxurl);
