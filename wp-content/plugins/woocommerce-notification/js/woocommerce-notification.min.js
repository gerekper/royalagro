"use strict";function vi_wn_b64DecodeUnicode(t){var i="";if(t)try{i=decodeURIComponent(atob(t).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""))}catch(i){return t}return i}function viSwipeDetect(t,i){var o,e,n,s,a,c,_=t,r=i||function(t){};_.addEventListener("touchstart",function(t){var i=t.changedTouches[0];o="none",e=i.pageX,n=i.pageY,c=(new Date).getTime()},!1),_.addEventListener("touchmove",function(t){t.preventDefault()},!1),_.addEventListener("touchend",function(t){var i=t.changedTouches[0];s=i.pageX-e,a=i.pageY-n,(new Date).getTime()-c<=300&&(Math.abs(s)>=150&&Math.abs(a)<=100?o=s<0?"left":"right":Math.abs(a)>=150&&Math.abs(s)<=100&&(o=a<0?"up":"down")),r(o)},!1)}jQuery(document).ready(function(t){if(t("#message-purchased").length>0){var i=woo_notification;0==_woocommerce_notification_params.billing&&0==_woocommerce_notification_params.detect&&i.detect_address(),viSwipeDetect(document.getElementById("message-purchased"),function(i){"none"!==i&&(parseInt(woo_notification.time_close)>0&&(t("#message-purchased").unbind(),woo_notification.setCookie("woo_notification_close",1,3600*parseInt(woo_notification.time_close))),woo_notification.message_hide(!1,i))})}}),jQuery(window).on("load",function(){var t=woo_notification;if(t.loop=_woocommerce_notification_params.loop,t.loop_session=_woocommerce_notification_params.loop_session,t.loop_session_duration=parseFloat(_woocommerce_notification_params.loop_session_duration),t.loop_session_total=parseInt(_woocommerce_notification_params.loop_session_total),t.init_delay=parseInt(_woocommerce_notification_params.initial_delay),t.total=parseInt(_woocommerce_notification_params.notification_per_page),t.display_time=parseInt(_woocommerce_notification_params.display_time),t.next_time=parseInt(_woocommerce_notification_params.next_time),t.ajax_url=_woocommerce_notification_params.ajax_url,t.products=_woocommerce_notification_params.products,t.messages=_woocommerce_notification_params.messages,t.image=_woocommerce_notification_params.image,t.redirect_target=_woocommerce_notification_params.redirect_target,t.time=_woocommerce_notification_params.time,t.display_effect=_woocommerce_notification_params.display_effect,t.hidden_effect=_woocommerce_notification_params.hidden_effect,t.messages=_woocommerce_notification_params.messages,t.names=_woocommerce_notification_params.names,t.detect=_woocommerce_notification_params.detect,t.billing=_woocommerce_notification_params.billing,t.in_the_same_cate=_woocommerce_notification_params.in_the_same_cate,t.message_custom=_woocommerce_notification_params.message_custom,t.message_number_min=_woocommerce_notification_params.message_number_min,t.message_number_max=_woocommerce_notification_params.message_number_max,t.time_close=_woocommerce_notification_params.time_close,t.show_close=_woocommerce_notification_params.show_close,t.change_virtual_time=_woocommerce_notification_params.change_virtual_time,t.start_virtual_time=_woocommerce_notification_params.start_virtual_time,t.end_virtual_time=_woocommerce_notification_params.end_virtual_time,t.change_message_number=_woocommerce_notification_params.change_message_number,t.current_hour=parseInt(_woocommerce_notification_params.current_hour),0==_woocommerce_notification_params.billing&&0==_woocommerce_notification_params.detect){t.cities=[t.getCookie("wn_city")],t.country=[t.getCookie("wn_country")];var i=t.getCookie("wn_ip");i||(t.detect_address(),t.cities=[t.getCookie("wn_city")],t.country=[t.getCookie("wn_country")],i=t.getCookie("wn_ip")),i&&"undefined"!=i&&t.init()}else t.cities=_woocommerce_notification_params.cities,t.country=_woocommerce_notification_params.country,t.init()});var woo_notification={billing:0,in_the_same_cate:0,loop:0,loop_session:0,loop_session_duration:3600,loop_session_total:30,timeOutShow:0,timeOutHide:0,init_delay:5,total:30,display_time:5,next_time:60,count:0,intel:0,wn_popup:0,id:0,messages:"",products:"",ajax_url:"",display_effect:"",hidden_effect:"",time:"",names:"",cities:"",country:"",message_custom:"",message_number_min:"",message_number_max:"",detect:0,time_close:0,show_close:0,change_virtual_time:"",start_virtual_time:"",end_virtual_time:"",change_message_number:"",current_hour:"",gmt_offset:"",first_name_index:[],shortcodes:["{first_name}","{city}","{state}","{country}","{product}","{product_with_link}","{time_ago}","{custom}"],init:function(){if(1==this.loop&&1==this.loop_session){var t=this.getCookie("woo_notification_session"),i=Date.now(),o=this.getCookie("woo_notification_displaying");if(o)return void(this.timeOutShow=setTimeout(function(){woo_notification.init()},o-i));if(t){var e=t.split(":"),n=parseInt(e[0]),s=e[1]-i;if(n>=this.loop_session_total)return void(this.timeOutShow=setTimeout(function(){woo_notification.init()},s))}}this.ajax_url?this.ajax_get_data():setTimeout(function(){woo_notification.get_product()},1e3*this.init_delay),jQuery("#message-purchased").on("mouseenter",function(){window.clearTimeout(woo_notification.wn_popup),window.clearTimeout(woo_notification.timeOutShow),window.clearTimeout(woo_notification.timeOutHide)}).on("mouseleave",function(){woo_notification.message_show(!0)})},detect_address:function(){this.getCookie("wn_ip")||jQuery.getJSON("https://extreme-ip-lookup.com/json/",function(t){t.query&&woo_notification.setCookie("wn_ip",t.query,86400),"success"===t.status&&(t.city&&woo_notification.setCookie("wn_city",t.city,86400),t.country&&woo_notification.setCookie("wn_country",t.country,86400))})},ajax_get_data:function(){var t;this.ajax_url&&!this.getCookie("woo_notification_close")&&(t=this.id?"&id="+this.id:"",jQuery.ajax({type:"POST",data:"action=woonotification_get_product"+t,url:this.ajax_url,success:function(t){var i=JSON.parse(t);i&&"undefined"!=i&&i.length>0&&(woo_notification.products=i,woo_notification.message_show(),setTimeout(function(){woo_notification.get_product()},1e3*woo_notification.init_delay))},error:function(t){}}))},message_show:function(t=!1){var i=jQuery("#message-purchased");if(t||(this.count++,this.audio()),1==this.loop&&1==this.loop_session){var o=this.getCookie("woo_notification_session"),e=1,n=1e3*this.loop_session_duration,s=Date.now(),a=s+n,c=this.getCookie("woo_notification_displaying");if(window.clearTimeout(this.timeOutHide),!t){if(c)return window.clearTimeout(this.timeOutShow),void(this.timeOutShow=setTimeout(function(){woo_notification.get_product()},c-s));if(o){var _=o.split(":");if(e=parseInt(_[0]),n=(a=_[1])-s,e>=this.loop_session_total)return window.clearTimeout(this.timeOutShow),void(this.timeOutShow=setTimeout(function(){woo_notification.get_product()},n));e++}this.setCookieNew("woo_notification_session",a,e+":"+a,!0)}this.timeOutHide=setTimeout(function(){woo_notification.message_hide()},1e3*this.display_time),this.setCookieNew("woo_notification_displaying",this.display_time+this.next_time),i.hasClass(this.hidden_effect)&&i.removeClass(this.hidden_effect),i.addClass(this.display_effect).css("display","flex")}else this.wn_popup=setTimeout(function(){woo_notification.message_hide()},1e3*this.display_time),window.clearInterval(this.intel),i.hasClass(this.hidden_effect)&&i.removeClass(this.hidden_effect),i.addClass(this.display_effect).css("display","flex")},message_hide:function(t=!1,i=""){var o=jQuery("#message-purchased");switch(o.hasClass(this.display_effect)&&o.removeClass(this.display_effect),i){case"left":o.addClass("bounceOutLeft");break;case"right":o.addClass("bounceOutRight");break;case"up":o.addClass("bounceOutUp");break;case"down":o.addClass("bounceOutDown");break;default:o.addClass(this.hidden_effect)}if(o.fadeOut(1e3),!t&&!this.getCookie("woo_notification_close")){var e=this.count;if(1==this.loop)if(1==this.loop_session){var n=this.getCookie("woo_notification_session"),s=1,a=1e3*this.loop_session_duration;this.getCookie("woo_notification_displaying");if(window.clearTimeout(this.timeOutHide),window.clearTimeout(this.timeOutShow),n){var c=new Date,_=n.split(":");if(s=_[0],a=_[1]-c.getTime(),s>=this.loop_session_total)return void(this.timeOutShow=setTimeout(function(){woo_notification.get_product()},a))}this.total>e?this.timeOutShow=setTimeout(function(){woo_notification.get_product()},1e3*this.next_time):this.timeOutShow=setTimeout(function(){woo_notification.get_product()},a)}else this.total>e&&(window.clearTimeout(this.wn_popup),this.intel=setInterval(function(){woo_notification.get_product()},1e3*this.next_time));else window.clearTimeout(this.wn_popup),window.clearInterval(this.intel)}},get_time_cal:function(){return this.change_virtual_time&&this.start_virtual_time&&this.end_virtual_time?this.random(3600*this.start_virtual_time,3600*this.end_virtual_time):this.random(0,3600*this.time)},get_time_string:function(){var t=this.get_time_cal(),i=parseFloat(t/86400);return i>1?1==(i=parseInt(i))?i+" "+_woocommerce_notification_params.str_day:i+" "+_woocommerce_notification_params.str_days:(i=parseFloat(t/3600))>1?1==(i=parseInt(i))?i+" "+_woocommerce_notification_params.str_hour:i+" "+_woocommerce_notification_params.str_hours:(i=parseFloat(t/60))>1?1==(i=parseInt(i))?i+" "+_woocommerce_notification_params.str_min:i+" "+_woocommerce_notification_params.str_mins:i<10?_woocommerce_notification_params.str_few_sec:(i=parseInt(i))+" "+_woocommerce_notification_params.str_secs},get_product:function(){var t,i,o,e,n,s,a=this.products,c=this.messages,_=this.image,r=this.redirect_target;if("undefined"!=a&&a&&c&&a.length>0&&c.length>0){var m=c[s=woo_notification.random(0,c.length-1)],u=a[s=woo_notification.random(0,a.length-1)];parseInt(this.billing)>0&&parseInt(this.in_the_same_cate)<1?(t=vi_wn_b64DecodeUnicode(u.first_name),e=vi_wn_b64DecodeUnicode(u.city),i=vi_wn_b64DecodeUnicode(u.state),o=vi_wn_b64DecodeUnicode(u.country),n=u.time):(this.names&&"undefined"!=this.names?(s=woo_notification.random(0,this.names.length-1),t=vi_wn_b64DecodeUnicode(this.names[s])):t="",this.cities&&"undefined"!=this.cities?(s=woo_notification.random(0,this.cities.length-1),e=vi_wn_b64DecodeUnicode(this.cities[s])):e="",i="",o=this.country,n=this.get_time_string());var d='<span class="wn-popup-product-title">'+u.title+"</span>",f='<a class="wn-popup-product-title-with-link"';"1"===r&&(f+='target="_blank"'),f+=' href="'+u.url+'">'+u.title+"</a>";var h="<small>"+_woocommerce_notification_params.str_about+" "+n+" "+_woocommerce_notification_params.str_ago+" </small>",p=this.message_custom,l="";u.thumb?(jQuery("#message-purchased").addClass("wn-product-with-image").removeClass("wn-product-without-image"),"1"===_?(l='<a class="wn-notification-image-wrapper" ',"1"===r&&(l+='target="_blank"'),l+=' href="'+u.url+'"><img class="wn-notification-image" src="'+u.thumb+'"></a>'):l='<span class="wn-notification-image-wrapper"><img class="wn-notification-image" src="'+u.thumb+'"></span>'):jQuery("#message-purchased").addClass("wn-product-without-image").removeClass("wn-product-with-image"),p=p.replace("{number}",this.get_data_custom_number(u.url));for(var w=this.shortcodes,g=[t,e,i,o,d,f,h,p],v=m,y=w.length-1;y>=0;y--)v=v.replace(w[y],g[y]);var b="";parseInt(this.show_close)>0&&(b='<div id="notify-close"></div>');var C=l+'<p class="wn-notification-message-container">'+v+"</p>";jQuery("#message-purchased").html('<div class="message-purchase-main">'+C+"</div>"+b),this.close_notify(),woo_notification.message_show()}},get_data_custom_number:function(t){if(!this.change_message_number)return this.random(this.message_number_min,this.message_number_max);if(this.current_hour<7)return this.message_number_min;let i,o,e,n=woo_notification.getCookie("wn_data_custom_number");return(n=this.checkJson(n)?JSON.parse(n):{})[t=t.replace("&amp;","&")]?(o=n[t]-3>this.message_number_min?n[t]-3:this.message_number_min,e=n[t]+2<this.message_number_max?n[t]+2:this.message_number_max):(o=this.message_number_min,e=this.message_number_max),i=this.random(o,e),n[t]=i,n=JSON.stringify(n),woo_notification.setCookie("wn_data_custom_number",n,120),i},close_notify:function(){jQuery("#notify-close").unbind(),jQuery("#notify-close").bind("click",function(t){parseInt(woo_notification.time_close)>0?(woo_notification.message_hide(!0),jQuery("#message-purchased").unbind(),woo_notification.setCookie("woo_notification_close",1,3600*parseInt(woo_notification.time_close))):(woo_notification.message_hide(),jQuery("#message-purchased").unbind())})},audio:function(){if(jQuery("#woocommerce-notification-audio").length>0){var t=document.getElementById("woocommerce-notification-audio"),i=function(){t.play().then(function(){setTimeout(function(){t.stop()},0)}),document.removeEventListener("touchstart",i,!1)};document.addEventListener("touchstart",i,!1),t.play()}},random:function(t,i){t=parseInt(t),i=parseInt(i);var o=Math.random()*(i-t);return Math.round(o)+t},setCookie:function(t,i,o){var e=new Date;e.setTime(e.getTime()+1e3*o);var n="expires="+e.toUTCString();document.cookie=t+"="+i+";"+n+";path=/"},setCookieNew:function(t,i,o="",e=!1){var n=new Date,s=n.getTime()+1e3*i;e&&(s=i),n.setTime(s),o||(o=s),document.cookie=t+"="+o+";expires="+n.toUTCString()+";path=/"},getCookie:function(t){for(var i=t+"=",o=decodeURIComponent(document.cookie).split(";"),e=0;e<o.length;e++){for(var n=o[e];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(i))return n.substring(i.length,n.length)}return""},checkJson:function(t){try{JSON.parse(t)}catch(t){return!1}return!0}};